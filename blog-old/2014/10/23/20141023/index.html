<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>2014/10/23 | Jackmew blog</title>
  <meta name="author" content="jackmew">
  
  <meta name="description" content="deign

vaadin FieldGroup
link
fieldgroup 
產生jpacontainer vaadin project
mvn archetype:generate -DarchetypeGroupId=com.vaadin -DarchetypeArtifactId=vaa">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="2014/10/23"/>
  <meta property="og:site_name" content="Jackmew blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Jackmew blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Jackmew blog</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-10-23T01:40:44.000Z"><a href="/2014/10/23/20141023/">Oct 23 2014</a></time>
      
      
  
    <h1 class="title">2014/10/23</h1>
  

    </header>
    <div class="entry">
      
        <h1 id="deign">deign</h1>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/8.png" alt="image"></p>
<h1 id="vaadin_FieldGroup">vaadin FieldGroup</h1>
<p><a href="https://www.youtube.com/watch?v=aq_OXCVqvFI" target="_blank">link</a></p>
<p>fieldgroup </p>
<h1 id="產生jpacontainer_vaadin_project">產生jpacontainer vaadin project</h1>
<p><code>mvn archetype:generate -DarchetypeGroupId=com.vaadin -DarchetypeArtifactId=vaadin-archetype-jpacontainer -DarchetypeVersion=LATEST -DgroupId=org.jackho -DartifactId=jpaTest -Dversion=1.0 -Dpackaging=war</code></p>
<p>提供了jpacontainer 在 maven 中是怎麼設定pom的</p>
<p>mvn 的一些指令</p>
<h1 id="jpacontainer_demo">jpacontainer demo</h1>
<p><a href="https://www.youtube.com/watch?v=6hz630Oz2Q0" target="_blank">link</a></p>
<p>但是不是很細節的講解 但是</p>
<h1 id="vaadin_directory">vaadin directory</h1>
<p><a href="https://vaadin.com/directory" target="_blank">vaadin add-on</a>又點像是maven repository的地方 </p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/9.png" alt="image"></p>
<p>右邊有設定方式</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/10.png" alt="image"></p>
<h1 id="work">work</h1>
<p>先產生基本的vaadin maven project</p>
<p><code>mvn archetype:generate -DarchetypeGroupId=com.vaadin -DarchetypeArtifactId=vaadin-archetype-application -DarchetypeVersion=LATEST -DgroupId=org.jackho -DartifactId=Playground -Dversion=1.0 -Dpackaging=war</code></p>
<p>先確定可以正確執行</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/11.png" alt="image"></p>
<p>pom.xml</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/12.png" alt="image"></p>
<p>然後就可以用JSR-303的hibernate-validator2的annotation</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/13.png" alt="image"></p>
<h1 id="開始">開始</h1>
<p>定義一個Person persistence</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/14.png" alt="image"></p>
<p>Person has an address</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/15.png" alt="image"></p>
<p>定義person form view -&gt; GridLayout</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/16.png" alt="image"></p>
<p>然後mainUI 設計persistence &amp; view </p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/17.png" alt="image"></p>
<p>出現</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/18.png" alt="image"></p>
<h1 id="FieldGroup_(是一個binder)">FieldGroup (是一個binder)</h1>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/19.png" alt="image"></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/20.png" alt="image"></p>
<p>因為這邊是這樣設定<code>BeanItem&lt;Person&gt; item = new BeanItem&lt;Person&gt;(person);</code> </p>
<p>所以person object has reference , 但是address沒有！ 要怎麼辦 ? </p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/21.png" alt="image"></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/22.png" alt="image"></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/23.png" alt="image"></p>
<h1 id="commit">commit</h1>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/24.png" alt="image"></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/25.png" alt="image"></p>
<h1 id="真正要validate時候出現錯誤！">真正要validate時候出現錯誤！</h1>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/26.png" alt="image"></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/27.png" alt="image"></p>
<p>操考<a href="http://stackoverflow.com/questions/16163162/vaadin-7-bean-validation" target="_blank">link</a> &amp; <a href="http://stackoverflow.com/questions/4302358/javax-validation" target="_blank">link</a></p>
<p>我決定加上</p>
<pre><code>    <span class="tag">&lt;<span class="title">dependency</span>&gt;</span>
        <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span>
        <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>hibernate-validator<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span>
        <span class="tag">&lt;<span class="title">version</span>&gt;</span>4.2.0.Final<span class="tag">&lt;/<span class="title">version</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span>
</code></pre><p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/28.png" alt="image"></p>
<p>成功 ！</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/29.png" alt="image"></p>
<p>但是出現sf4j fail 目前沒啥太大影響 就先不管了</p>
<p><img src="![image](https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/30.png" alt="image">)</p>
<p>而且這時候就可以加上<code>@Email</code></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/31.png" alt="image"></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/32.png" alt="image"></p>
<p>還有個問題</p>
<p>當用FieldGroup bind form &amp; source(Person) , 會自動show person資料<br>什麼時候execute validation ?</p>
<ol>
<li>field value change</li>
<li>binder.commit</li>
</ol>
<p>若一開始person null , 進入畫面時 因為form bind person 所以顯示出null ,<br>此時field value從空白變成null-&gt;field change -&gt; validate ?! 如何改善?</p>
<p>一開始就讓validation not visible : <code>xxx.setValidationVisible(false);</code></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/33.png" alt="image"></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/34.png" alt="image"></p>
<p>button按下去以後 再讓validation visible : <code>enableValidationMessages()</code></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/1/35.png" alt="image"></p>
<h1 id="dynamic_create_layout">dynamic create layout</h1>
<p>use fieldGroup : create field for us</p>
<p>將form都給取消掉</p>
<p>comment :</p>
<p>//        final PersonForm form  = new PersonForm();<br>//        layout.addComponent(form);</p>
<p>//          binder.bindMemberFields(form); =&gt; 也就是說bind已存在的東西</p>
<p>//form.enableValidationMessages();</p>
<pre><code>Field field = binder<span class="preprocessor">.buildAndBind</span>(<span class="string">"firstname"</span>)<span class="comment">;</span>
layout<span class="preprocessor">.addComponent</span>(field)<span class="comment">;</span>
</code></pre><p>buildAndBind =&gt; <code>動態建立</code>一個field 然後bind person field : firstname</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/2/1.png" alt="image"></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/2/2.png" alt="image"></p>
<h1 id="think_FieldGroup">think FieldGroup</h1>
<p>其實就是個binder 負責bind persistence(Person) &amp; view(form)</p>
<p>因此這樣也可以做到</p>
<pre><code>    //Binding <span class="keyword">property</span> into field
    final FieldGroup binder = <span class="keyword">new</span> FieldGroup();
    //what fieldgroup take <span class="keyword">to</span> argument <span class="keyword">is</span> an item -&gt; 
    BeanItem&lt;Person&gt; item = <span class="keyword">new</span> BeanItem&lt;Person&gt;(person);
    binder.setItemDataSource(item);

    Field field = binder.buildAndBind(<span class="string">"firstname"</span>);
    layout.addComponent(field);

    TextField <span class="keyword">select</span> = <span class="keyword">new</span> TextField();
    binder.bind(<span class="keyword">select</span>, <span class="string">"lastname"</span>);
    layout.addComponent(<span class="keyword">select</span>);
</code></pre><h1 id="dynamic_create_advance">dynamic create advance</h1>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/2/3.png" alt="image"></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/2/4.png" alt="image"></p>
<p>even include <code>address properties</code> in <code>person</code> !!!</p>
<h1 id="提到spring_boot_!?">提到spring boot !?</h1>
<p><a href="https://www.youtube.com/watch?v=aq_OXCVqvFI" target="_blank">25m</a></p>
<p>multiple page for diffent data</p>
<p>how to show different type of validation</p>
<p>找到<a href="https://github.com/vaadin-kim/fieldgroup-demo" target="_blank">source code</a>了 !!</p>
<p>但是mvm package失敗.. 少了一個jar</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/leandev/vaadin/2/5.png" alt="image"></p>
<p>但是<a href="http://grepcode.com/snapshot/repo1.maven.org$maven2@org.vaadin.spring$spring-boot-vaadin@0.0.2" target="_blank">我似乎找到這個jar了</a>?  要怎麼放進去maven dependency裡?</p>
<p>找到<a href="https://github.com/peholmst/vaadin4spring" target="_blank">關於spring boot的東西</a></p>
<h1 id="vaadin_book_&amp;_source_code">vaadin book &amp; source code</h1>
<p><a href="http://it-ebooks.info/book/2397/" target="_blank">book</a></p>
<p><a href="https://github.com/nfrankel/More-Vaadin" target="_blank">source code</a></p>
<h1 id="似乎可以快速重啟vaadin_!">似乎可以快速重啟vaadin !</h1>
<p><a href="http://stackoverflow.com/questions/2615386/how-to-integrate-maven-generated-vaadin-project-into-eclipse-vaadin-plugin" target="_blank">link</a></p>
<p>這篇似乎也在講這個<a href="http://bluegulf.wordpress.com/2012/10/18/tutorial-of-setting-up-eclipsemavenvaadinjetty-project-ide-2/" target="_blank">link</a></p>
<h1 id="vaadin-maven-plugin_這到底是殺小？">vaadin-maven-plugin 這到底是殺小？</h1>
<p><a href="http://www.java2s.com/Code/Jar/v/Downloadvaadinmavenplugin717jar.htm" target="_blank">link</a></p>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/blog/">blog</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/vaadin/">vaadin</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">Comments</h1>

  
      <div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789012345";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-comments" data-href="http://jackmew.github.io/2014/10/23/20141023/" data-num-posts="5" data-width="840" data-colorscheme="light"></div>
      
  
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:jackmew.github.io">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/blog/">blog</a><small>177</small></li>
  
    <li><a href="/categories/developent/">developent</a><small>2</small></li>
  
    <li><a href="/categories/leandev/">leandev</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/C/">C</a><small>1</small></li>
  
    <li><a href="/tags/CSS/">CSS</a><small>2</small></li>
  
    <li><a href="/tags/HTML/">HTML</a><small>1</small></li>
  
    <li><a href="/tags/JQuery/">JQuery</a><small>2</small></li>
  
    <li><a href="/tags/JQuery Validate/">JQuery Validate</a><small>1</small></li>
  
    <li><a href="/tags/Java/">Java</a><small>1</small></li>
  
    <li><a href="/tags/Jquery mobile/">Jquery mobile</a><small>1</small></li>
  
    <li><a href="/tags/MVC/">MVC</a><small>1</small></li>
  
    <li><a href="/tags/Mac/">Mac</a><small>1</small></li>
  
    <li><a href="/tags/REST/">REST</a><small>1</small></li>
  
    <li><a href="/tags/ajax/">ajax</a><small>1</small></li>
  
    <li><a href="/tags/android/">android</a><small>1</small></li>
  
    <li><a href="/tags/apache/">apache</a><small>1</small></li>
  
    <li><a href="/tags/blog/">blog</a><small>1</small></li>
  
    <li><a href="/tags/bower/">bower</a><small>1</small></li>
  
    <li><a href="/tags/callback/">callback</a><small>2</small></li>
  
    <li><a href="/tags/canvas/">canvas</a><small>2</small></li>
  
    <li><a href="/tags/command/">command</a><small>1</small></li>
  
    <li><a href="/tags/compass/">compass</a><small>1</small></li>
  
    <li><a href="/tags/cordova/">cordova</a><small>3</small></li>
  
    <li><a href="/tags/css/">css</a><small>7</small></li>
  
    <li><a href="/tags/development/">development</a><small>4</small></li>
  
    <li><a href="/tags/dropbox/">dropbox</a><small>2</small></li>
  
    <li><a href="/tags/eclipse/">eclipse</a><small>1</small></li>
  
    <li><a href="/tags/exception handle/">exception handle</a><small>1</small></li>
  
    <li><a href="/tags/express/">express</a><small>8</small></li>
  
    <li><a href="/tags/git/">git</a><small>3</small></li>
  
    <li><a href="/tags/gradle/">gradle</a><small>2</small></li>
  
    <li><a href="/tags/groovy/">groovy</a><small>1</small></li>
  
    <li><a href="/tags/gwt/">gwt</a><small>5</small></li>
  
    <li><a href="/tags/heroku/">heroku</a><small>4</small></li>
  
    <li><a href="/tags/hexo/">hexo</a><small>1</small></li>
  
    <li><a href="/tags/hibernate/">hibernate</a><small>1</small></li>
  
    <li><a href="/tags/host/">host</a><small>1</small></li>
  
    <li><a href="/tags/hosting/">hosting</a><small>1</small></li>
  
    <li><a href="/tags/java/">java</a><small>4</small></li>
  
    <li><a href="/tags/javasciprt/">javasciprt</a><small>2</small></li>
  
    <li><a href="/tags/javascript/">javascript</a><small>7</small></li>
  
    <li><a href="/tags/jquery/">jquery</a><small>1</small></li>
  
    <li><a href="/tags/jquery mobile/">jquery mobile</a><small>4</small></li>
  
    <li><a href="/tags/jquery plugin/">jquery plugin</a><small>1</small></li>
  
    <li><a href="/tags/json/">json</a><small>1</small></li>
  
    <li><a href="/tags/jsonp/">jsonp</a><small>2</small></li>
  
    <li><a href="/tags/kinecticjs/">kinecticjs</a><small>1</small></li>
  
    <li><a href="/tags/kineticjs/">kineticjs</a><small>1</small></li>
  
    <li><a href="/tags/log4j/">log4j</a><small>1</small></li>
  
    <li><a href="/tags/mac/">mac</a><small>6</small></li>
  
    <li><a href="/tags/maven/">maven</a><small>5</small></li>
  
    <li><a href="/tags/mobile/">mobile</a><small>1</small></li>
  
    <li><a href="/tags/mongo/">mongo</a><small>4</small></li>
  
    <li><a href="/tags/mou/">mou</a><small>1</small></li>
  
    <li><a href="/tags/mysql/">mysql</a><small>1</small></li>
  
    <li><a href="/tags/node/">node</a><small>10</small></li>
  
    <li><a href="/tags/nodejs/">nodejs</a><small>1</small></li>
  
    <li><a href="/tags/phoneGap/">phoneGap</a><small>1</small></li>
  
    <li><a href="/tags/phonegap/">phonegap</a><small>10</small></li>
  
    <li><a href="/tags/php/">php</a><small>1</small></li>
  
    <li><a href="/tags/plugin/">plugin</a><small>1</small></li>
  
    <li><a href="/tags/remote debug/">remote debug</a><small>1</small></li>
  
    <li><a href="/tags/ripple/">ripple</a><small>1</small></li>
  
    <li><a href="/tags/safari/">safari</a><small>1</small></li>
  
    <li><a href="/tags/sass/">sass</a><small>5</small></li>
  
    <li><a href="/tags/sencha/">sencha</a><small>13</small></li>
  
    <li><a href="/tags/shell/">shell</a><small>1</small></li>
  
    <li><a href="/tags/spring/">spring</a><small>2</small></li>
  
    <li><a href="/tags/spring boot/">spring boot</a><small>5</small></li>
  
    <li><a href="/tags/spring data jpa/">spring data jpa</a><small>5</small></li>
  
    <li><a href="/tags/spring data rest/">spring data rest</a><small>1</small></li>
  
    <li><a href="/tags/spring securitry/">spring securitry</a><small>1</small></li>
  
    <li><a href="/tags/springboot/">springboot</a><small>3</small></li>
  
    <li><a href="/tags/springmvc/">springmvc</a><small>5</small></li>
  
    <li><a href="/tags/springsecurity/">springsecurity</a><small>1</small></li>
  
    <li><a href="/tags/sublime/">sublime</a><small>2</small></li>
  
    <li><a href="/tags/tbs/">tbs</a><small>2</small></li>
  
    <li><a href="/tags/terminal/">terminal</a><small>1</small></li>
  
    <li><a href="/tags/thymeleaf/">thymeleaf</a><small>1</small></li>
  
    <li><a href="/tags/unit test/">unit test</a><small>1</small></li>
  
    <li><a href="/tags/vaadin/">vaadin</a><small>36</small></li>
  
    <li><a href="/tags/vaddin/">vaddin</a><small>1</small></li>
  
    <li><a href="/tags/validate/">validate</a><small>1</small></li>
  
    <li><a href="/tags/validation/">validation</a><small>1</small></li>
  
    <li><a href="/tags/vim/">vim</a><small>1</small></li>
  
    <li><a href="/tags/wbase/">wbase</a><small>4</small></li>
  
    <li><a href="/tags/weinre/">weinre</a><small>1</small></li>
  
    <li><a href="/tags/yahoo finance api/">yahoo finance api</a><small>1</small></li>
  
    <li><a href="/tags/yeoman/">yeoman</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2015 jackmew
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>