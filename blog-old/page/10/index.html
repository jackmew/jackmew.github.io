<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>zestlifia old blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="zestlifia old blog">
<meta property="og:url" content="http://www.zestlifia.tw/blog-old/page/10/index.html">
<meta property="og:site_name" content="zestlifia old blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="zestlifia old blog">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="zestlifia old blog" type="application/atom+xml">
  
  
    <link rel="icon" href="favicon.ico?">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/blog-old/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">zestlifia old blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.zestlifia.tw/blog-old"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-20140811" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-old/2014/08/11/20140811/" class="article-date">
  <time datetime="2014-08-11T05:43:20.000Z" itemprop="datePublished">2014-08-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-old/categories/blog/">blog</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-old/2014/08/11/20140811/">2014/08/11</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#Spring Security</p>
<p>#SpringApplication.run</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/18.png" alt="image"></p>
<p>我發現App 這個class 預設會extends WebMvcConfigurerAdapter , 然後當想要改一些基本設定 addResourceHandlers , addViewControllers 時 才需要明確地寫出extends WebMvcConfigurerAdapter , 可是當我將extends WebMvcConfigurerAdapter 寫在別的class , 它(spring boot) 的基本設定就會失效.</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/19.png" alt="image"></p>
<p>所以變成強制你一定要去設定addResourceHandlers , addViewControllers , 也就是說當我改成多了一個SpringContext 的 configuration 設定時 可能會導致部分Spring Boot  基本設定失效 , 並且可能失效在我不知道的地方 …嗎 ???</p>
<p>#WebSecurityConfig</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/20.png" alt="image"></p>
<p>configureGlobal 可能會將user,password,roles 存入memory(session)中 , 因為當我測試登入時 , 點下登入button沒有辦法進入debug模式 也就是說 他是直接去對memory(session) 比對 帳號密碼</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/21.png" alt="image"></p>
<p>再來是login.html 的 <code>data-th-action=login</code> , 我在controller沒有去設定對這個url接收request , <code>data-th-if=param.error&quot; &amp; data-th-if=param.logout</code>  這個param我也沒有設定 , 所以說當使用Spring Security 的 configureGlobal 的 AuthenticationManagerBuilder 時 它會自動幫你處理很多事情 . </p>
<p><a href="http://docs.spring.io/spring-security/site/docs/4.0.0.M1/reference/htmlsingle/" target="_blank" rel="external">Spring Security Reference</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/22.png" alt="image"></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/23.png" alt="image"></p>
<p>看來 裡面還包含很多功能 已經被建立在裡面了</p>
<p><a href="http://docs.spring.io/spring-security/site/docs/4.0.0.M1/reference/htmlsingle/#jc-form" target="_blank" rel="external">Detail</a></p>
<p><a href="http://docs.spring.io/spring-security/site/docs/4.0.0.M1/reference/htmlsingle/#jc-authentication" target="_blank" rel="external">Authentication</a>:</p>
<ol>
<li>In Memory Authentication </li>
<li>JDBC Authentication</li>
<li>LDAP Authenetication</li>
</ol>
<p>#Logout</p>
<p>原本:</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/24.png" alt="image"></p>
<p>變成會顯示current user name &amp; 可以logout </p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/25.png" alt="image"></p>
<p><code>data-th-with=currentUser</code></p>
<p>會去從httpServletRequest 抓參數 並且設定變數currentUser<br>這個變數會拿來show current user name</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/26.png" alt="image"></p>
<p><code>data-th-action=logout</code> 會觸發到Spring security預設的authentication</p>
<p>#userDetails </p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/27.png" alt="image"></p>
<ol>
<li><p>SpringSecurityContextHolder : The most fundamental object in spring security : 儲存security的想關屬性 , data , detail</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/28.png" alt="image"></p>
</li>
</ol>
<ol>
<li>Authentication object to represent SpringSecurityContextHolder </li>
</ol>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/29.png" alt="image"></p>
<ol>
<li>userDetails is a core interface in Spring Security. As the adapter between  your own database</li>
</ol>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/30.png" alt="image"></p>
<ol>
<li>UserDetails 將 SpringSecurityContextHolder的資料 放入Authentication</li>
</ol>
<p>也就是說SpringSecurityContextHolder儲存security訊息 , userDetails adapter the database &amp; 寫入 從SpringSecurityContextHolder抓來的security資料 放入Authentication, 所以如果你有相關的security資料要取得 都跟Authentication 去取得</p>
<p>#@override</p>
<p>發DAOImple 不能加上@override ??? 奇怪？</p>
<p><a href="http://stackoverflow.com/questions/8697513/why-do-i-get-must-override-a-superclass-method-with-override" target="_blank" rel="external">link</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/31.png" alt="image"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.zestlifia.tw/blog-old/2014/08/11/20140811/" data-id="cih51i8370000q9rglga1n5rx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-old/tags/spring-securitry/">spring securitry</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20140808" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-old/2014/08/08/20140808/" class="article-date">
  <time datetime="2014-08-08T01:25:59.000Z" itemprop="datePublished">2014-08-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-old/categories/blog/">blog</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-old/2014/08/08/20140808/">2014/08/08</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#command object</p>
<p><a href="http://stackoverflow.com/questions/7583577/what-is-the-command-object-in-spring-framework" target="_blank" rel="external">link</a></p>
<p><a href="http://docs.spring.io/spring-framework/docs/2.0.8/reference/mvc.html" target="_blank" rel="external">link</a></p>
<p>大概就是Spring 拿來傳送data 的 object吧</p>
<h1 id="@MappedSuperclass">@MappedSuperclass</h1><p><a href="http://ynp.iteye.com/blog/781097" target="_blank" rel="external">link</a></p>
<h1 id="override_hashCode()_&amp;_equals">override hashCode() &amp; equals</h1><p><a href="http://dtr-trading.blogspot.tw/2014/02/spring-mvc-4-bootstrap-and-validation.html" target="_blank" rel="external">link</a></p>
<p>必須去復習一下 , 似乎是很basic 卻很重要的基礎</p>
<p><a href="http://www.halyph.com/2013/05/equals-hashcode-and-tostring-in-java.html" target="_blank" rel="external">Equals, HashCode and toString in Java</a></p>
<p>作者認為IDE產生的equals , hashCode , toString 很難 maintenance .</p>
<p>認為用Apache Commons Langs or Google Guave 實作的 equals,hashCode,toString比較好 , 但是在文章最後也說如果你只需要equals,hashcode,toString的話 , 那還是不要另外加上library吧…</p>
<p>所以我決定用IDE產生的就好</p>
<h1 id="serializable">serializable</h1><p><a href="http://stackoverflow.com/questions/2020904/when-and-why-jpa-entities-should-implement-serializable-interface" target="_blank" rel="external">spring entity serializable</a></p>
<h1 id="SerialVersionUID">SerialVersionUID</h1><p><a href="http://www.mkyong.com/java-best-practices/understand-the-serialversionuid/" target="_blank" rel="external">mkyong</a> </p>
<h1 id="RedirectAttributes:_addAttribute_vs_addFlashAttribute">RedirectAttributes: addAttribute vs addFlashAttribute</h1><p><a href="http://stackoverflow.com/questions/14470111/spring-redirectattributes-addattribute-vs-addflashattribute" target="_blank" rel="external">link</a></p>
<p>addAttribute : 存在session中 而且可以加上或取得request param</p>
<p>addFlashAttribute : 只要到下一次redirect request 就會被清除</p>
<h1 id="Thymeleaf_:_Validation_&amp;_error_message">Thymeleaf : Validation &amp; error message</h1><p><a href="http://www.thymeleaf.org/doc/thymeleafspring.html#validation-and-error-messages" target="_blank" rel="external">Validation and Error Messages</a></p>
<p>在Entity 先設定 validation(條件)<br><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/validation/1.png" alt="image"></p>
<p>在controller 加入@Valid 去驗證條件 , BindingResult 會存入錯誤訊息 還有錯誤訊息數量 , BindingResult 會被塞入 model 傳到html</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/validation/3.png" alt="image"></p>
<p>field.hasErrors(“xxx”) =&gt; 會判斷xxx欄位有沒有錯誤<br>有的就會顯示error , 而這個錯誤訊息bind到Entity </p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/validation/4.png" alt="image"></p>
<p>然後再去抓這個Entity錯誤訊息 bind到哪個validationMessage的key/value</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/validation/6.png" alt="image"></p>
<p>接著就可以顯示啦~  紅色的字是因為 class=”text-danger”</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/validation/5.png" alt="image"></p>
<p>接下來將錯誤訊息 也改為internalization</p>
<p>首先我們知道<a href="http://stackoverflow.com/questions/6261858/internationalization-in-hibernate-validators" target="_blank" rel="external">By default messages are retrieved from a resource bundle named “ValidationMessages”.</a> , 所以可以猜測其他國家的錯誤訊息格式應該是這樣<a href="http://www.javacodegeeks.com/2012/12/jax-rs-bean-validation-error-message-internationalization.html" target="_blank" rel="external">ValidationMessages_XX.properties</a></p>
<p>把Locale改成台灣</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/validation/7.png" alt="image"></p>
<p>加入ValidationMessages_zh_TW.properties</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/validation/8.png" alt="image"></p>
<p>成功！</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/validation/9.png" alt="image"></p>
<h1 id="bootsrap_theme">bootsrap theme</h1><p>當我想要使用bootsrap theme 時 要加入一些css , font ,js ,可是我用webjar , 把boostrap , jquery 放在其它folder , 其實還是可以做 , 可是更大的問題是 , 如果之後要加入更多.js , .css ,那不是變得更複雜？ 而且放置的位置就不能一致 , 挺怪的… 決定放棄只用webjar</p>
<h1 id="完成frament">完成frament</h1><p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/validation/10.png" alt="image"></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/validation/11.png" alt="image"></p>
<h1 id="login_and_basic_security">login and basic security</h1><p>需要加上<code>spring-boot-starter-security</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.zestlifia.tw/blog-old/2014/08/08/20140808/" data-id="cih51eany0000pzrgey9h2z9b" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-20140807" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-old/2014/08/07/20140807/" class="article-date">
  <time datetime="2014-08-07T01:28:19.000Z" itemprop="datePublished">2014-08-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-old/categories/blog/">blog</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-old/2014/08/07/20140807/">2014/08/07</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#spring boot log</p>
<p>我在pom.xml加入slf4j &amp; log4j 出現問題</p>
<p><a href="http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-logging" target="_blank" rel="external">link</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/logger/2.png" alt="image"></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/logger/3.png" alt="image"></p>
<p>原來spring boot start poms 就已經有包括slf4j &amp; log4j</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/logger/4.png" alt="image"></p>
<p>在application.properties 中加入.log檔案產生的位置,log level , 但log level要注意的是 最後面還要有一個點 <a href="http://stackoverflow.com/questions/20485059/spring-boot-how-can-i-set-the-logging-level-with-application-properties" target="_blank" rel="external">logging.level.=DEUBG</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/logger/5.png" alt="image"></p>
<p>但level設到debug 會多出一堆的訊息= =</p>
<p>#接下來要完成thymeleaf CRUD</p>
<p>#Thymeleaf model</p>
<p>當我要做Add的時候 需要傳一個object 回去給controller</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/34.png" alt="image"></p>
<p>可是出現一個問題</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/33.png" alt="image"></p>
<p>現在終於看懂為什麼要加Strategy object</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/35.png" alt="image"></p>
<p>多加上Strategy object 到 html頁面 用以在需要add strategy 時 拿來封裝的object</p>
<p>#button send parameter</p>
<p>可否按下不同button 抓到不同訊息?</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/22.png" alt="image"></p>
<p>按下update or 按下 cancel =&gt; controller可以接到不同訊息</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/21.png" alt="image"></p>
<p>接下來controller 可以接到參數名稱為action value=save/cancel</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/20.png" alt="image"></p>
<p>#send query string</p>
<p>send one variable and one string</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/23.png" alt="image"></p>
<p>and controller use @RequestParam receive these two parameter.</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/24.png" alt="image"></p>
<p>#Use webjar to add Bootstrap</p>
<p><a href="http://spring.io/blog/2014/01/03/utilizing-webjars-in-spring-boot" target="_blank" rel="external">webjars-in-spring-boot</a></p>
<p><a href="http://www.webjars.org/" target="_blank" rel="external">link</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/30.png" alt="image"></p>
<p>####在pom.xml加入</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/32.png" alt="image"></p>
<p>####html include jquery , bootstrap<br><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/31.png" alt="image"></p>
<p>#&nbsp; </p>
<p>控制項之間加入空白</p>
<p>#form-group</p>
<p><a href="http://getbootstrap.com/css/" target="_blank" rel="external">link</a></p>
<p>bootstrap 用來滿足原本grid system的方式 用在table</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.zestlifia.tw/blog-old/2014/08/07/20140807/" data-id="cih51dyd70002pxrga606j6gl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-old/tags/springboot/">springboot</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20140806" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-old/2014/08/06/20140806/" class="article-date">
  <time datetime="2014-08-06T01:37:14.000Z" itemprop="datePublished">2014-08-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-old/categories/blog/">blog</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-old/2014/08/06/20140806/">2014/08/06</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#設定DatabaseConfig , 用dataSource建立連現時 一直出現問題</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/10.png" alt="image"></p>
<p>結果只是mysql server 還沒啟動</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/11.png" alt="image"></p>
<p>再次<code>spring-boot:run</code></p>
<p>就成功了</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/12.png" alt="image"></p>
<p>#No Session found for current thread</p>
<p><a href="http://www.mkyong.com/spring/spring-hibernate-no-session-found-for-current-thread/" target="_blank" rel="external">Spring + Hibernate : No Session Found For Current Thread , mkyong</a></p>
<p>The sessionFactory needs transaction to work, to solve it, declare a transaction manager in Spring.</p>
<p>所以我在ServieImple 加上 @Transactional 就可以了</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/13.png" alt="image"></p>
<p>#java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name ‘strategyDTO’ available as request attribute</p>
<p>很奇怪的問題 </p>
<p>我在controller 傳資料 根本沒有傳StrategyDTO , 為啥會出現這問題？</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/16.png" alt="image"></p>
<p>打算傳List<strategy> 到Strategy-list.html </strategy></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/17.png" alt="image"></p>
<p>卻一直出現Exeption</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/18.png" alt="image"></p>
<p>原來是Strategy-list.html 下面還有一個</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/19.png" alt="image"></p>
<p>把他刪除 就可以了</p>
<p>我一直以為Thymeleaf在找不到相對應的參數時 就會不理會 抓不到而已, 原來在request發出後 就會去檢查 相對應的參數…</p>
<p>Thymeleaf果然是Server-side 程式 </p>
<p>#Thymeleaf send object / receive object</p>
<p><a href="http://stackoverflow.com/questions/17669212/send-datas-from-html-to-controller-in-thymeleaf" target="_blank" rel="external">簡單明瞭的講解</a></p>
<p><a href="http://www.thymeleaf.org/doc/thymeleafspring.html" target="_blank" rel="external">thymeleaf + spring</a></p>
<p><a href="https://github.com/jackmew/ThymeleafPassing" target="_blank" rel="external">我寫成可以執行的Thymeleaf範例程式</a></p>
<p>#log</p>
<p><a href="http://singleant.iteye.com/blog/934593" target="_blank" rel="external">slf4j + log4j</a></p>
<p>有各種方式的方式的搭配方法 , 但我看了Jason和DTR的log配置 竟然一模一樣! </p>
<pre><code><span class="comment">&lt;!-- ** Logging ** --&gt;</span>
    <span class="tag">&lt;<span class="title">dependency</span>&gt;</span>
        <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span>
        <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span>
        <span class="tag">&lt;<span class="title">version</span>&gt;</span>${org.slf4j-version}<span class="tag">&lt;/<span class="title">version</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span>
    <span class="tag">&lt;<span class="title">dependency</span>&gt;</span>
        <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span>
        <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>jcl-over-slf4j<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span>
        <span class="tag">&lt;<span class="title">version</span>&gt;</span>${org.slf4j-version}<span class="tag">&lt;/<span class="title">version</span>&gt;</span>
        <span class="tag">&lt;<span class="title">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="title">scope</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span>
    <span class="tag">&lt;<span class="title">dependency</span>&gt;</span>
        <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span>
        <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span>
        <span class="tag">&lt;<span class="title">version</span>&gt;</span>${org.slf4j-version}<span class="tag">&lt;/<span class="title">version</span>&gt;</span>
        <span class="tag">&lt;<span class="title">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="title">scope</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span>
    <span class="tag">&lt;<span class="title">dependency</span>&gt;</span>
        <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span>
        <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span>
        <span class="tag">&lt;<span class="title">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="title">version</span>&gt;</span>
        <span class="comment">&lt;!-- exclude missing libraries in central Maven repository because of license issues --&gt;</span>
        <span class="tag">&lt;<span class="title">exclusions</span>&gt;</span>
            <span class="tag">&lt;<span class="title">exclusion</span>&gt;</span>
                <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>javax.mail<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span>
                <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>mail<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span>
            <span class="tag">&lt;/<span class="title">exclusion</span>&gt;</span>
            <span class="tag">&lt;<span class="title">exclusion</span>&gt;</span>
                <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>javax.jms<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span>
                <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>jms<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span>
            <span class="tag">&lt;/<span class="title">exclusion</span>&gt;</span>
            <span class="tag">&lt;<span class="title">exclusion</span>&gt;</span>
                <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>com.sun.jdmk<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span>
                <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>jmxtools<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span>
            <span class="tag">&lt;/<span class="title">exclusion</span>&gt;</span>
            <span class="tag">&lt;<span class="title">exclusion</span>&gt;</span>
                <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>com.sun.jmx<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span>
                <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>jmxri<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span>
            <span class="tag">&lt;/<span class="title">exclusion</span>&gt;</span>
        <span class="tag">&lt;/<span class="title">exclusions</span>&gt;</span>
        <span class="tag">&lt;<span class="title">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="title">scope</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span>
</code></pre><p>這應該也是slf4j + log4j的配置 並且排除掉 一些不需要的功能 , 既然如此 我也這樣配置</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.zestlifia.tw/blog-old/2014/08/06/20140806/" data-id="cih51dydc0005pxrggez0flqb" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-old/tags/springmvc/">springmvc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-old/tags/thymeleaf/">thymeleaf</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20140805" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-old/2014/08/05/20140805/" class="article-date">
  <time datetime="2014-08-05T01:34:32.000Z" itemprop="datePublished">2014-08-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-old/categories/blog/">blog</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-old/2014/08/05/20140805/">2014/08/05</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#mysql </p>
<p><a href="http://blog.wu-boy.com/2012/11/innodb-as-the-default-mysql-storage-engine/" target="_blank" rel="external">InnoDB</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/7.png" alt="image"></p>
<p>預設已經是InnoDB,好像有很多優點 就用吧 比較要注意的是 作者說在最好在每個table都要有Primary key ,因為有Primary key InnoDB就會自動優化效能.</p>
<p><a href="http://www.dotblogs.com.tw/jimmyyu/archive/2009/08/30/10320.aspx" target="_blank" rel="external">Collation</a> : 定序指的就是決定資料被排序與比對的規則</p>
<p><a href="http://www.codedata.com.tw/database/mysql-tutorial-13-stored-routines/" target="_blank" rel="external"> Stored Procedures</a> : 就是一種預存程式 , 將原本很長的程式 包在Procedures裡面 並給予名稱 , 所以下次當要執行這個很長的程式 , 只要呼叫Procedures就行了</p>
<p><a href="http://stackoverflow.com/questions/733349/list-of-stored-procedures-functions-mysql-command-line" target="_blank" rel="external">show function/procedure status</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/8.png" alt="show procedure status"></p>
<p>受不了每次要看database , table , 就要一直下指令 有夠麻煩 試試看 <a href="http://www.sequelpro.com/" target="_blank" rel="external">Sequal pro</a></p>
<h1 id="Users,_Roles,_Permissions">Users, Roles, Permissions</h1><p><a href="http://dtr-trading.blogspot.tw/2014/04/spring-security-32-users-roles.html" target="_blank" rel="external">link</a></p>
<p>user has role , role has permission .</p>
<p>Permissoin implements <code>GrantedAuthority</code> =&gt; Spring Security consider it’s authorities .</p>
<p>@JoinTable 是在描述 連接兩個table中間的那個foreign table.</p>
<p><a href="http://openhome.cc/Gossip/EJB3Gossip/OneToMany.html" target="_blank" rel="external">fetch=FetchType.EAGER</a></p>
<h1 id="Spring_Thymeleaf_CRUD_User_Maintenance">Spring Thymeleaf CRUD User Maintenance</h1><p><a href="http://dtr-trading.blogspot.tw/2014/04/spring-thymeleaf-crud-user-maintenance.html" target="_blank" rel="external">link</a></p>
<p>接下來都是CRUD部分了 … 看太久了 ..開始自己吧!!!</p>
<h1 id="Spring_Web_Initialization">Spring Web Initialization</h1><p><a href="http://www.kubrynski.com/2014/01/understanding-spring-web-initialization.html" target="_blank" rel="external">link</a></p>
<p>JavaEE =&gt; ServletContainerInitializer interface =&gt; 當 Web application startup 時 需要的libraries會被通知 </p>
<p>Spring 3.1 =&gt; SpringServletContainerInitializer =&gt; handle WebApplicationInitializer =&gt; Sorting then basing on @Order  onStartup 就會啟動Web application</p>
<p>Spring 3.2 =&gt; AbstractContextLoaderInitializer implements WebApplicationInitializer =&gt; </p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/2/9.png" alt="image"></p>
<p>createRootApplicationContext() =&gt; 可以create applicatoin context(AnnotationConfigWebApplicationContext) , application context register xxxConfig.class到ServletContext =&gt; 為了想要自動register =&gt; AbstractContextLoaderInitializer </p>
<p>最新 =&gt; AbstractAnnotationConfigDispatcherServletInitializer : simplifying Spring initialization - we don’t need to manually create contexts but just set appropriate config classes , …真是歷史悠久的感覺</p>
<p>啟動 當作entry point :</p>
<ol>
<li><p>Spring 3.1 =&gt; WebApplicationInitializer</p>
</li>
<li><p>Spring 3.2 =&gt; AbstractAnnotationConfigDispatcherServletInitializer</p>
</li>
<li><p>Spring Boot =&gt; SpringApplication.run</p>
</li>
</ol>
<p>#spring boot vs spring roo</p>
<p><a href="http://stackoverflow.com/questions/20576843/is-spring-boot-meant-to-replace-spring-roo" target="_blank" rel="external">link</a></p>
<p>spring roo is about code generation.</p>
<p>#Conclusion</p>
<ol>
<li>Security =&gt; 登入帳號密碼(user) 一.in-memeory 二.UserService with database</li>
<li>Authority=&gt; 根據role來決定要進入那個頁面,決定哪些role可以進去某個url ex:<code>/strategy/**</code> , 因此不同role可以操作的部分 會不同 , 當不具有權限時 試著進入會出現403 Access denied =&gt; 實作 AccessDeniedHandler 來custom 錯誤訊息畫面</li>
<li>Permission =&gt;</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.zestlifia.tw/blog-old/2014/08/05/20140805/" data-id="cih51dydg0009pxrgveu8hgv8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-old/tags/springmvc/">springmvc</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20140804" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-old/2014/08/04/20140804/" class="article-date">
  <time datetime="2014-08-04T01:10:28.000Z" itemprop="datePublished">2014-08-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-old/categories/blog/">blog</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-old/2014/08/04/20140804/">2014/08/04</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#Problem</p>
<p>再次列出想知道的問題 再加上其他的問題</p>
<ol>
<li>cglib,jar  &amp; asm.jar 這兩個必須要加入才能夠使用@Configuration , 那可以使用Maven加入嗎? <a href="http://stackoverflow.com/questions/18224365/cglib-is-required-to-process-configuration-classes" target="_blank" rel="external">當然可以</a> , 可是在後來的專案中 都沒有特別加入這兩個.jar檔 所以猜測應該是被合起來到別的.jar中 ==&gt; <a href="http://stackoverflow.com/questions/19800004/why-is-there-no-spring-asm-3-2-4-release-jar" target="_blank" rel="external">合到spring-core中</a></li>
<li>突然看到spring裡面有個.jar叫做 com.springsource.org.aspectj.weaver  ? weaver是什麼意思 ? 之前Jason做的檔案 or 檔案名稱 <a href="http://www.eclipse.org/aspectj/doc/released/devguide/ltw.html" target="_blank" rel="external">也有叫做weaber的 </a> ==&gt;  <code>The AspectJ weaver takes class files as input and produces class files as output.</code> 大概就是把某些檔案包起來處理 再把他包起來拿出去 這種概念吧</li>
<li>原本對Bean的做法是bean tag處理的就是要放入IoC 等待被ApplicatoinContext取出來使用(原本是Beanfactory).   那  springmvc是在什麼時候將@Bean @Controller @Repository 這些class , 或者說這些configuration是什麼時候放入IoC , 又在什麼時候取出來使用呢?  ==&gt; 在使用@Configuration &amp; @Bean 就會 register 到 IoC中 , @Autowired 就會取出來使用 .</li>
<li>可是以上並沒有解釋到@Controller , @Service ,@Repository,@Component 他們是怎麼register到IoC中 ==&gt; <a href="http://www.mkyong.com/spring/spring-auto-scanning-components/" target="_blank" rel="external">Spring Auto Scanning Components</a> ==&gt; 原來他們會自動register到IoC , 而他們之間有什麼差別呢？ ==&gt;<br><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/22.png" alt="image"> 其實沒什麼差別 , 可以全部用@Component取代 但為了Readibility 所以才分成很多種</li>
<li>這時候又碰到一個問題,一定要加上Component Scan嗎? 明明是說Auto Scanning Component了 , 還要再加上Component Scan ? 這邊有一個<a href="http://stackoverflow.com/questions/7414794/difference-between-contextannotation-config-vs-contextcomponent-scan" target="_blank" rel="external">context:annotation- config vs context:component-scan的問題</a> , 可是這並不是java config的方式 , 它一半還是用.xml設定….. ==&gt; 查資料的過程中 發現很多.xml設定的寫法 , 一半.xml 一半java config的寫法 , 全部java config的寫法 … 這是一種演進過程 !? , 而且往往會發現 在演進的過程中, 一些必用或常用的東西, 會直接納入default的設定 , 也就是說為什麼@Controller 不需要 @ComponentScan 就可以直接@RequestMapping的原因就是 在Springmvc的架構下 , controller就是要拿來mapping url的呀 那為啥還要每次都Component scan ? …當然這目前還是我的猜測. </li>
</ol>
<p><a href="http://www.luckyryan.com/2013/02/07/migrate-spring-mvc-servlet-xml-to-ja va-config/" target="_blank" rel="external">migrate-spring-mvc-servlet-xml-to-java-config</a> 這篇裡面寫到一些東西 ==&gt;</p>
<p><code>@EnableWebMVC, this is the same as &lt;mvc:annotation-driven/&gt;</code></p>
<p><code>ComponentScan(basePackages = {“com.luckyryan.sample”}), this is the same as &lt;context:component-scan base-package=”com.luckyryan.sample”/&gt;</code></p>
<p><code>Extend the class to use WebMvcConfigurerAdapter. This adds stub implementations from the WebMvcConfigurer interface which is used by @EnableWebMVC. It also gives us a chance to override resources and the default handler.</code> 這段很明確地說了 非常常用到的WebMvcConfigurerAdapter 是用來override resources/servelet handler 和 override viewResolver , 並且是跟@EnableWebMVC 搭配使用 , 這邊有個問題就是 , 就算不加入@EnableWebMVC 一樣可以使用WebMvcConfigurerAdapter , 所以說 可能是已經常常都是搭配使用的 既然如此 何必要每次都要加上@EnableWebMVC , 把他變成default設定就好啦! …當然是我的猜測 , 猜測是對的? ==&gt;  <a href="http://stackoverflow.com/questions/3977973/whats-the-difference-between-mvcannotation-driven-and-contextannotation" target="_blank" rel="external">You don’t need to use it unless you need one or more of the features outlined in the aforementioned section of the docs.</a></p>
<ol>
<li><a href="http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate" target="_blank" rel="external">JPA vs Hibernate</a> ==&gt; JPA定義的是一種規格 , Hibernate的一種ORM的實作方式 並且你也可以實作JPA規格 , 接下來jdbc , jdbcTemplate , datasource , hibernate 之間的關係 ??? 有點複雜呀 , <a href="http://openhome.cc/Gossip/SpringGossip/" target="_blank" rel="external">持久層</a> , 大概可以總結的就是, 有非常多的技術,裡面各有優缺點 , 但是目前所要使用的功能都太簡單,所以無法去分辨哪種情況要使用哪種東西…</li>
</ol>
<p>#重新回到Spring Security</p>
<p>#spring-ex08-security</p>
<p>in-memory的 security實作</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/security/3.png" alt="image"></p>
<p>帳號密碼直接放在程式碼中,這表示也不能動態加入新的使用者</p>
<p>#spring-ex09-security</p>
<p><a href="http://dtr-trading.blogspot.tw/2014/04/spring-mvc-4-security-part-2.html" target="_blank" rel="external">link</a></p>
<p>改成從database資料進行帳號密碼驗證 , 抓USERS(domain object:User) , 比對帳號密碼,</p>
<p>Spring Security database schema &amp; UserDetailsService</p>
<p>Spring Security’s UserDetails</p>
<p>@SuppressWarnings :<a href="http://openhome.cc/Gossip/JavaGossip-V2/AnnotationSuppressWarnings.htm" target="_blank" rel="external">不在編譯完成後出現警告</a></p>
<p>#spring-ex10-security</p>
<p><a href="http://dtr-trading.blogspot.tw/2014/04/spring-mvc-4-spring-security-32-part-3.html" target="_blank" rel="external">link</a></p>
<p>再加入ROLES(domain object:Role) ,USERS/ROLES 都有Primary key 指到 USER/ROLES這個table , User has Role</p>
<p>ROLES會決定你可以操作哪些東西: add authorization to the controllers and methods.</p>
<p>#spring-ex11-auth</p>
<p><a href="http://dtr-trading.blogspot.tw/2014/04/spring-security-32-authorization-part-1.html" target="_blank" rel="external">link</a></p>
<p>add role based authorization to the CRUD application we’ve been building.</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/security/4.png" alt="image"></p>
<p>只有role:admin 才能進入strategy/後面的頁面 或者CRUD操作</p>
<p>#spring-ex12-auth</p>
<p><a href="http://dtr-trading.blogspot.tw/2014/04/spring-security-32-authorization-part-2.html" target="_blank" rel="external">link</a></p>
<ol>
<li>add a custom access denied (403) page =&gt; WEB-INF/views/error</li>
<li><p>create class to handle the access denied exception =&gt; implements AccessDeniedHandler</p>
</li>
<li><p>在DatabaseConfig加入@Bean AccessDeniedExceptionHandler =&gt; 很怪 為什麼會加在DatabaseConfig…?</p>
</li>
<li><p>SecurityConfig去@Autowired這個bean,並且設定頁面error權限</p>
</li>
<li><p>Error controller 導到/error/accessDeniedPage</p>
</li>
</ol>
<p>必須先讓頁面出現Access deny 的頁面 , 才能夠用AccessDeniedHandler這class去處理.</p>
<p>#spring-ex13-auth</p>
<p>用兩個Annotation取代 .antMatchers(“/strategy/**”).hasRole(“ADMIN”) </p>
<ol>
<li>SecurityConfig : @EnableGlobalMethodSecurity(prePostEnabled=true) //enable global method security </li>
</ol>
<ol>
<li>StrategyController : @PreAuthorize(“hasRole(‘ROLE_ADMIN’)”)</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.zestlifia.tw/blog-old/2014/08/04/20140804/" data-id="cih51dydk000cpxrgduz7k14n" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-old/tags/springmvc/">springmvc</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20140801" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-old/2014/08/01/20140801/" class="article-date">
  <time datetime="2014-08-01T01:17:44.000Z" itemprop="datePublished">2014-08-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-old/categories/blog/">blog</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-old/2014/08/01/20140801/">2014/08/01</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#Spring-ex08-security</p>
<p>基本的登入帳號密碼驗證 之前就看過類似做法 但看了幾遍後 還是無法理解怎麼來的 怎麼會這樣子寫 文件在哪查？</p>
<p>只好怒研究作者提供的連結:</p>
<p>Rob Spring-security-3.2 <a href="http://spring.io/blog/2014/01/21/webinar-replay-spring-security-3-2" target="_blank" rel="external">presentation </a> &amp; <a href="https://github.com/rwinch/gs-spring-security-3.2" target="_blank" rel="external">github repository</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/security/1.png" alt="image"></p>
<p>Spring.io 是 一個platform , 提供各式各式各樣服務的整合</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/security/2.png" alt="image"></p>
<p>inMemoryAuthentication =&gt; jdbcAuthenticatoin</p>
<p>#CSRF(Cross-site request forgery) Protection</p>
<p>=&gt; one-click attack or session riding</p>
<p><a href="http://www.dotblogs.com.tw/joysdw12/archive/2013/09/16/asp-net-cross-site-request-forgery.aspx" target="_blank" rel="external">寫得很詳細</a></p>
<p>#XSS(Cross-site Scripting)</p>
<p><a href="http://jax-work-archive.blogspot.tw/2010/05/xss.html" target="_blank" rel="external">link</a></p>
<p>#gs-spring-security-3.2</p>
<p><a href="https://github.com/rwinch/gs-spring-security-3.2" target="_blank" rel="external">link</a></p>
<p>已經加上Security了 , 把功能很簡單的程式寫得很複雜…</p>
<p>#等等？！ Spring Security 都有這麼精緻的教學了 那Spring annotation呢?</p>
<p>結果還真的查詢spring annotation tutorials 就有了…怎麼之前都沒想到 , 越看越覺得annotation的細節不理解 然後security又用一堆annotation… 要看的東西又變多了！</p>
<p><a href="http://simplespringtutorial.com/index.html" target="_blank" rel="external">spring tutorial</a></p>
<p>#spring tutorial</p>
<p><a href="http://simplespringtutorial.com/" target="_blank" rel="external">link</a></p>
<p>###spring dependency injection </p>
<p>設定Bean</p>
<ol>
<li>XML files 2. Properties </li>
</ol>
<p>然後Spring幫你inject你要的Bean</p>
<p>普通的java程式 , 比較像domain object , 接著你希望可以用這些object</p>
<p> <img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/1.png" alt="image"></p>
<p>將這些object 設成bean</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/2.png" alt="image"></p>
<p>接著讓Spring 使用這些bean</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/3.png" alt="image"></p>
<p>ClassPathXmlApplicationContext 設定路徑去抓bean的設定xxx.xml </p>
<p>###spring resource injection</p>
<p>我們常需要去讀某個在System or network 上的file,ex:取得某些設定的參數,i18n , 因此Spring提供了<code>Resource</code> 這個interface</p>
<p>#####Read a file from …</p>
<ol>
<li><p>current working directory =&gt; <code>FileSystemResource</code></p>
</li>
<li><p>access using the url protocal =&gt; <code>UrlReource</code></p>
</li>
<li><p>on your classpath =&gt; <code>ClassPathResource</code></p>
</li>
</ol>
<p>#####Injecting Resources</p>
<ol>
<li><p>Resource injection =&gt; loading <code>static</code> resources</p>
</li>
<li><p>Using ResourceLoader =&gt; loading <code>dynamic</code> resources ex:based on some business logic</p>
</li>
</ol>
<p>###spring annotation</p>
<p><a href="http://simplespringtutorial.com/annotations.html" target="_blank" rel="external">link</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/4.png" alt="image"></p>
<p>用.xml來設定bean</p>
<p>要注意的是<code>&lt;context:annotation-config /&gt;</code> 要加上這一行才能被@Autowired or @Resource 抓到</p>
<p>內容定義了三個bean</p>
<p>兩個是同一個Foo class 但不同id , 其中一個還定義了qualifier</p>
<p>一個是Bar class</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/5.png" alt="image"></p>
<p><code>@PostConstruct</code>  – 在contruct 之後–&gt; 表示這個function會在bean建立好之後直接執行</p>
<p><code>@PreDestroy</code> –&gt; 表示這個function會在bean destroy前 執行</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/6.png" alt="image"></p>
<p><code>@Autowired</code> 會去對應<code>型別 type</code>去抓bean , 根據Foo 去抓型別為Foo這個bean , 這是在.xml設定了兩個型別為Foo的bean , 這時候會出現<code>有兩個type 是Foo的bean</code> 的錯誤訊息 , 因此再加上<code>@Qualifer</code>  qualifer tag 的value</p>
<p><code>Resource</code> 去對應bean tag的id</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/7.png" alt="image"></p>
<p>執行成功 </p>
<p>問題是我不想要用.xml設定bean啊 , 想要用 <code>@Bean</code> 設定 要怎麼做?</p>
<p>#@Configuration &amp; @Bean Annotations</p>
<p><a href="http://www.tutorialspoint.com/spring/spring_java_based_configuration.htm" target="_blank" rel="external">link</a></p>
<p>Annotating a class with the @Configuration indicates that the class can be used by the <code>Spring IoC container</code> as a source of bean definitions. </p>
<p>什麼事Spring Ioc Container ? 又出現看不懂的東西…</p>
<p>#spring IoC(Inverse of Control)</p>
<p><a href="http://www.tutorialspoint.com/spring/spring_java_based_configuration.htm" target="_blank" rel="external">簡單明瞭的解釋</a></p>
<ol>
<li>origin</li>
</ol>
<p>main –&gt; 抓參數 建立connection –&gt; 操作資料庫</p>
<p>所以說當我們要對資料庫操作時 都一定要執行一堆的程式 然後建立connection ?</p>
<p>那這樣這個程式 不就不能分開執行 也就是說藕合度很高!</p>
<ol>
<li>spring IoC</li>
</ol>
<p>所有的class都會登記在spring中  , 所以當要用的時候只要跟spring要就行了</p>
<p>main –&gt; annotation取得 connection –&gt; 操作資料庫</p>
<p>所以說可以拆得更散 當要某些東西時 跟spring要就好了(當然在這之間他就先執行完了 放在spring中等待人來使用) , 降低了藕合度</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/8.png" alt="image"></p>
<p>#回到@Configuration &amp; @Bean Annotations</p>
<p>我要把原本用.xml設定bean得例子 改成 java config </p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/9.png" alt="image"></p>
<p>.xml -&gt; Config.java</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/10.png" alt="image"></p>
<p>取得Configuration</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/11.png" alt="image"></p>
<p>console 表示 似乎有抓到bean的設定 但是@Configuration 需要CGLIB.jar , ASM.jar</p>
<p>跟另一邊的教學 說的是一樣的事情</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/12.png" alt="image"></p>
<p><a href="http://www.java2s.com/Code/Jar/a/Downloadasm31jar.htm" target="_blank" rel="external">download ASM.jar</a></p>
<p><a href="http://www.java2s.com/Code/Jar/c/Downloadcglib22jar.htm" target="_blank" rel="external">download cglib.jar</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/13.png" alt="image"></p>
<p>出現的錯誤訊息 表示他不知道怎麼抓@Qualifier 定義個bean Foo</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/14.png" alt="image"></p>
<p>我先把Config bean Bar 註解掉 就成功了!!!</p>
<p>接下來<a href="http://stackoverflow.com/questions/9182805/spring-attaching-qualifer-to-java-configured-beans" target="_blank" rel="external">解決@Qualifier的問題</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/15.png" alt="image"></p>
<p>之前的.xml 被Config.java取代 , 而Qualifier tag 改成@Qualifier(“secondaryFoo”) 就可以了</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/16.png" alt="image"></p>
<p><code>Foo foo = ctx.getBean(&quot;foo&quot;, Foo.class);</code> 表示Bean type:Foo , id:foo 的這個Bean</p>
<p>console出現的Null表示 Bar autowired的兩個foo 都有instantiate ,但其中之一 我沒有asign值給name 所以顯示null</p>
<p>#Springmvc Configuration</p>
<p>完成以上範例後 就知道 為什麼在Springmvc 或 SpringBoot 裡面 有一堆@Configuration class 一堆</p>
<p>@Bean , @Controller , @Service , @Repository ,而不知道他們是什麼時候去執行的 , 所以說這算是某種標記 , 當有這些標記的 就會被register 到 Spring IoC container 中 等待執行 , 當需要使用的時候 才被@Autowired等方式 Inject到你需要的地方</p>
<h1 id="@import">@import</h1><p>將config 分成兩個 ConfigF (config foo) , ConfigB (config bar)</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/17.png" alt="image"></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/18.png" alt="image"></p>
<p>因為Bar 需要用到 Foo 所以在ConfigB中import ConfigF</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/19.png" alt="image"></p>
<p>當抓到ConfigB.class 同時會 抓到ConfigF 因為已經import到ConfigB了</p>
<p>#Spring Internationalization</p>
<p><a href="http://simplespringtutorial.com/i18n.html" target="_blank" rel="external">i18n</a></p>
<p>Spring 中 處理多國語言的方法 : <code>ResourceBundleMessageSource</code></p>
<p>範例中用.xml設定bean處理</p>
<p>我改為java config</p>
<p>在這邊只列出跟原本寫法不同的地方</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/20.png" alt="image"></p>
<p>要注意的是<code>source.setBasename(&quot;i18n.javaConfig/messages&quot;);</code></p>
<p>你要給他對的路徑去抓message</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/annotation/21.png" alt="image"></p>
<p><code>ApplicationContext ctx = 
                  new AnnotationConfigApplicationContext(MessageConfig.class);</code></p>
<p>抓configuration</p>
<p>成功了!  原來如此 <code>ResourceBundleMessageResource</code> 就只是負責抓message的事情</p>
<p>#Spring jdbc</p>
<p><a href="http://simplespringtutorial.com/springjdbc.html" target="_blank" rel="external">Spring jdbc</a></p>
<p><a href="http://jackmew.github.io/2014/07/22/20140722/" target="_blank" rel="external">mysql ddl(Database Definition Language)</a></p>
<p>突然有一些問題產生:</p>
<ol>
<li><p>Autowired 沒辦法在main function中使用 ??? <a href="http://stackoverflow.com/questions/3659720/using-spring-3-autowire-in-a-standalone-java-application" target="_blank" rel="external">解決方式</a></p>
</li>
<li><p>jdbcTemplate vs hibernate.sessionFactory ???</p>
</li>
<li><p>jdbcTemplate vs hibernate.sessionFactory vs CrudRepository ???</p>
</li>
<li><p>JPA vs Hibernate ???</p>
</li>
<li><p>@Controller @Service @Repository @Component 不用像@Bean 一樣設在@Configuration中 ??? 而且不用@Autowired or ApplicationContext去抓 就可以使用 ???</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.zestlifia.tw/blog-old/2014/08/01/20140801/" data-id="cih51dyb30000pxrgw4hhwy1i" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-20140731" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-old/2014/07/31/20140731/" class="article-date">
  <time datetime="2014-07-31T01:17:44.000Z" itemprop="datePublished">2014-07-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-old/categories/blog/">blog</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-old/2014/07/31/20140731/">2014/07/31</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#Google Analytics</p>
<p>又是從<a href="http://zespia.tw/blog/2014/07/28/use-google-analytics-api-on-server/" target="_blank" rel="external">SkyArrow</a>這小子知道的東西, 他在講如何安裝使用,<a href="http://sofree.cc/google-analytics/" target="_blank" rel="external">香腸魷魚</a>比較明確解釋了這是拿來做什麼的:提供訪客瀏覽人次、網頁瀏覽人次、用戶的瀏覽器、作業系統、螢幕解析度、網站熱門文章、熱門關鍵字、訪客來自於何處等等資料</p>
<p>#完全用application.properties 建立project</p>
<p>mvn archetype:create -DgroupId=org.jmc.sbProperty -DartifactId=sbProperty</p>
<p>@RestController 才可以return String</p>
<p>@Controller 試用於return model 到 並導向某個頁面</p>
<p>錄製影片=&gt;po youtube</p>
<p>#EnableAutoConfiguration<br><a href="http://stackoverflow.com/questions/20685042/why-does-the-addition-of-enableautoconfiguration-cause-spring-boot-to-fail-with" target="_blank" rel="external">link</a></p>
<p>#Thymleaf怪問題</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/18.png" alt="image"></p>
<p>跳出的這個錯誤訊息 好像是 會無法讓Thymeleaf Autowire ?</p>
<p>所以我用self configuration 解決 </p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/21.png" alt="image"></p>
<p>的確是可以解決 但是我記得之前只設定application.properties 就可以設定Thymeleaf setting才對</p>
<p>試驗很久才發現 是application.properties設定有問題</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/19.png" alt="image"></p>
<ol>
<li><p>路徑的最前面 最後面都缺少/</p>
</li>
<li><p>我以為.properties #開頭都會被註解掉 沒發現false後面沒變顏色 其實是沒有註解掉的</p>
</li>
</ol>
<p>…一些白癡問題….</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/20.png" alt="image"></p>
<p>#Iterable</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/java/iterable/1.png" alt="image"></p>
<p>稍微解釋了為什麼List和Set都可以用Iterator來尋訪</p>
<p>Iterable<monster> =&gt; List<monster></monster></monster></p>
<p>#Thymeleaf 抓出資料方法</p>
<ol>
<li><p>List data : </p>
<pre><code><span class="tag">&lt;<span class="title">tr</span> <span class="attribute">data-th-each</span>=<span class="value">"monster : ${monsterList}"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">td</span> <span class="attribute">data-th-text</span>=<span class="value">"${monster.id}"</span>&gt;</span>1<span class="tag">&lt;/<span class="title">td</span>&gt;</span>
    <span class="tag">&lt;<span class="title">td</span> <span class="attribute">data-th-text</span>=<span class="value">"${monster.name}"</span>&gt;</span>Iron Butterfly<span class="tag">&lt;/<span class="title">td</span>&gt;</span>
    <span class="tag">&lt;<span class="title">td</span> <span class="attribute">data-th-text</span>=<span class="value">"${monster.category}"</span>&gt;</span>Triple Butter<span class="tag">&lt;/<span class="title">td</span>&gt;</span>
    <span class="tag">&lt;<span class="title">td</span> <span class="attribute">data-th-text</span>=<span class="value">"${monster.ability}"</span>&gt;</span>Triple Butter<span class="tag">&lt;/<span class="title">td</span>&gt;</span>
<span class="tag">&lt;/<span class="title">tr</span>&gt;</span>
</code></pre></li>
<li><p>object</p>
<pre><code><span class="tag">&lt;<span class="title">tr</span> <span class="attribute">data-th-each</span>=<span class="value">"${monster}"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">td</span> <span class="attribute">data-th-text</span>=<span class="value">"*{id}"</span>&gt;</span>1<span class="tag">&lt;/<span class="title">td</span>&gt;</span>
    <span class="tag">&lt;<span class="title">td</span> <span class="attribute">data-th-text</span>=<span class="value">"*{name}"</span>&gt;</span>Iron Butterfly<span class="tag">&lt;/<span class="title">td</span>&gt;</span>
    <span class="tag">&lt;<span class="title">td</span> <span class="attribute">data-th-text</span>=<span class="value">"*{category}"</span>&gt;</span>Triple Butter<span class="tag">&lt;/<span class="title">td</span>&gt;</span>
    <span class="tag">&lt;<span class="title">td</span> <span class="attribute">data-th-text</span>=<span class="value">"*{ability}"</span>&gt;</span>Triple Butter<span class="tag">&lt;/<span class="title">td</span>&gt;</span>
<span class="tag">&lt;/<span class="title">tr</span>&gt;</span>
</code></pre></li>
</ol>
<p>#Thymeleaf 傳參數回 Controller的方法</p>
<p>1.</p>
<p>按下button type=”submit” 夾帶value</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/22.png" alt="image"></p>
<p>當按下save or cancel都會導向 <code>data-th-action=&quot;@{/strategy/edit}&quot;</code></p>
<p>但</p>
<p>按下save</p>
<p><code>&lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot; name=&quot;action&quot; value=&quot;save&quot;</code></p>
<p>按下cancel</p>
<p><code>&lt;button type=&quot;submit&quot; class=&quot;btn btn-default active&quot; name=&quot;action&quot; value=&quot;cancel&quot;</code></p>
<p>會傳不同的參數到controller</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/23.png" alt="image"></p>
<p><code>@RequestParam(value=&quot;action&quot;, required=true) String action</code></p>
<p>接住參數! 在用這個參數來做處理 導向不同頁面 or 發出不同message</p>
<p>2.</p>
<p>按下anchor</p>
<p>直接一次夾帶兩個參數</p>
<pre><code><span class="xml"><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span>    <span class="attribute">data-th-href</span>=<span class="value">"@</span></span></span><span class="expression">{<span class="end-block">/strategy</span><span class="end-block">/delete</span>(<span class="variable">id</span>=${<span class="variable">strategy.id</span>}</span><span class="xml"><span class="tag"><span class="value">,phase=stage)}"</span>&gt;</span></span>
</code></pre><p>#JSP vs Thymeleaf</p>
<p><a href="http://blog.csdn.net/kingzone_2008/article/details/19034615" target="_blank" rel="external">link</a></p>
<p>Thymeleaf win</p>
<p>#spring-ex07-navigation</p>
<p>##using Thymeleaf fragment</p>
<p><a href="http://startbootstrap.com/template-overviews/sb-admin-2/" target="_blank" rel="external">SB-Admin theme</a></p>
<p>主要在講要怎麼加入Bootstrap的theme</p>
<p>超酷的呀 一堆很漂亮的theme , 用Thymeleaf到現在還沒有覺得有比直接用javascript寫好 , 但是一家上 fragment , 套用template這概念 就變超強</p>
<p>##bootstrap theme structure</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/26.png" alt="image"></p>
<p>所有.html檔案 都可以點起來看 , 現在目的是要加入vertical bar , horizontal bar ,</p>
<p>然後原本的部分 卡在中間就好 像這樣</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/27.png" alt="image"></p>
<p>加入blank.html和所有folder 要照著原本的目錄結構放.</p>
<p>#blank.html =&gt; sb-admin.html</p>
<ol>
<li><p>horizental nav =&gt;  <code>&lt;nav data-th-fragment=&quot;top-nav&quot;</code></p>
</li>
<li><p>vertical nav =&gt;  <code>&lt;nav data-th-fragment=&quot;vert-nav-admin&quot;</code></p>
</li>
<li><p>留空 =&gt;</p>
<pre><code><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"page-wrapper"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"row"</span>&gt;</span>
        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"col-lg-12"</span>&gt;</span>
            <span class="tag">&lt;<span class="title">h1</span> <span class="attribute">class</span>=<span class="value">"page-header"</span>&gt;</span>Blank<span class="tag">&lt;/<span class="title">h1</span>&gt;</span>
        <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
        <span class="comment">&lt;!-- /.col-lg-12 --&gt;</span>
    <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
    <span class="comment">&lt;!-- /.row --&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
</code></pre><p>#strategy-list.html</p>
<p> <div id="wrapper">                <!-- /#wrapper --></div></p>
<pre><code>&lt;<span class="tag">div</span> data-th-replace=<span class="string">"fragments/sb-admin :: top-nav"</span>&gt;&lt;/div&gt; =&gt;用<span class="attribute">top</span>-<span class="tag">nav</span>

&lt;<span class="tag">div</span> data-th-replace=<span class="string">"fragments/sb-admin :: vert-nav-admin"</span>&gt;&lt;/div&gt; =&gt; 用vert-nav-admin

&lt;<span class="tag">div</span> id=<span class="string">"page-wrapper"</span>&gt; =&gt;用page-wrapper
</code></pre></li>
</ol>
<p>#Response timeline</p>
<p><a href="http://startbootstrap.com/templates/sb-admin-2/" target="_blank" rel="external">link</a> </p>
<p>找到想要用的東西！</p>
<p>#準備開始痛苦的Security之旅</p>
<p><a href="http://dtr-trading.blogspot.tw/2014/02/spring-mvc-4-security-part-1.html" target="_blank" rel="external">Spring MVC 4 &amp; Spring Security 3.2 - Part 1</a></p>
<p>光作者說要參考的就有四個超多內容的連結!</p>
<p><a href="http://spring.io/blog/2014/01/21/webinar-replay-spring-security-3-2" target="_blank" rel="external">Presentation</a></p>
<p><a href="https://github.com/rwinch/gs-spring-security-3.2" target="_blank" rel="external">Rob’s GitHub Repository</a></p>
<p><a href="http://docs.spring.io/spring-security/site/docs/3.2.x/guides/hellomvc.html" target="_blank" rel="external">Hello Spring MVC Security Java Config</a></p>
<p><a href="http://docs.spring.io/spring-security/site/docs/3.2.x/guides/form.html" target="_blank" rel="external">Creating a Custom Login Form</a></p>
<p>原來security全部的資料 都在這裡<a href="http://docs.spring.io/spring-security/site/docs/3.2.x/" target="_blank" rel="external">Index of /spring-security/site/docs/3.2.x</a>,內容包含filter</p>
<p>#Spring-ex08-security</p>
<p>基本的1.登入 2.判斷登入帳號密碼是否正確 3.顯示使用者 4.登出 </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.zestlifia.tw/blog-old/2014/07/31/20140731/" data-id="cih51d897000ppsrgl8j9i8sd" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-20140730" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-old/2014/07/30/20140730/" class="article-date">
  <time datetime="2014-07-30T00:58:44.000Z" itemprop="datePublished">2014-07-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-old/categories/blog/">blog</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-old/2014/07/30/20140730/">2014/07/30</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#Thymeleaf Expression Syntax</p>
<p>為了理解form show error message =&gt; ex:</p>
<p>data-th-if=”${fields.hasErrors(‘type’)}” </p>
<p>是怎麼運作的 , 只好去看<a href="http://www.thymeleaf.org/doc/usingthymeleaf.html#standard-expression-syntax" target="_blank" rel="external">Expression Syntax</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/1.png" alt="image"></p>
<p>##Message Expression #{…} :</p>
<p>負責的部分是去抓message.properties 裡面的key/value</p>
<p>可以在message裡面加入參數</p>
<p>hello.first=Nice to meet you, {0} ! ==&gt; java.text.MessageFormat的用法</p>
<p>##Variable ${…} =&gt; OGNL(Object-Graph Naviation Language)</p>
<p>早期Struct 2 – EL – #{} –&gt; 去抓JSP各種資源</p>
<p>EL – 被取代 –&gt; <a href="http://commons.apache.org/proper/commons-ognl/" target="_blank" rel="external">OGNL</a></p>
<p>是一種操作物件屬性的運算式語言</p>
<ol>
<li><p>支援給予值操作和運算式串聯</p>
</li>
<li><p>存取OGNL context &amp; ActionContext(所有的Servlet資源)</p>
</li>
<li><p>使用 . 當作操作符 person.getCountry.getName() ==同等於=&gt; person.country.name</p>
</li>
<li><p>能夠存取物件的方法</p>
</li>
</ol>
<p>##Thymeleaf 對 所有Serlet資源作存取:session,locale, 對request傳過來的參數做存取</p>
<p><a href="http://www.thymeleaf.org/doc/usingthymeleaf.html#appendix-a-expression-basic-objects" target="_blank" rel="external">link</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/3.png" alt="image"></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/4.png" alt="image"></p>
<p>##Expression Utitity Object</p>
<p><a href="http://www.thymeleaf.org/doc/usingthymeleaf.html#appendix-b-expression-utility-objects" target="_blank" rel="external">link</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/2.png" alt="image"></p>
<p>這些Utility 對傳過來的Object or request parameter進行操作 處理 , 就像是我們之前jquery.ajax 傳接資料後 , 對資料進行存取一樣</p>
<h2 id="Expressions_on_selection(asterisk_syntax)_*{…}">Expressions on selection(asterisk syntax) *{…}</h2><p>跟${…} 做類似的事情 都是取variable , 但是*{…} 範圍較小 是已經被選擇(selection)的variable </p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/5.png" alt="image"></p>
<p>比如說 已經確定是抓到session裡面夾了user object , user object中當然也有參數 , 這已經被選擇(selection)的<br>的variable就可以被*{…]存取</p>
<p>##Link URLs @{…}</p>
<p><a href="http://www.thymeleaf.org/doc/usingthymeleaf.html#link-urls" target="_blank" rel="external">link</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/6.png" alt="image"></p>
<p>給予url 位置的syntax 並且可以夾帶dynamic variable</p>
<p>##相對路徑 引用bootstrap</p>
<p><code>&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;../../resources/css/bootstrap-3.1.1.min.css&quot; th:href=&quot;@{/resources/css/bootstrap-3.1.1.min.css}&quot; /&gt;</code></p>
<p>##夾帶參數</p>
<p><code>&lt;a href=&quot;#&quot;    data-th-href=&quot;@{/strategy/edit(id=${strategy.id})}&quot;&gt;</code></p>
<p>按下Edit</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/7.png" alt="image"></p>
<p>那裡面的url就包了strategy.id的參數</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/8.png" alt="image"></p>
<p>##一次夾帶多個參數 用,分開</p>
<p><code>&lt;a href=&quot;#&quot;    data-th-href=&quot;@{/strategy/delete(id=${strategy.id},phase=stage)}&quot;&gt;</code></p>
<p>按下Delete</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/9.png" alt="image"></p>
<p>夾帶id=9&amp;phase=stage 兩個參數</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/10.png" alt="image"></p>
<p>##th:text </p>
<p>showing text</p>
<p>##th:utext</p>
<p><a href="http://www.thymeleaf.org/doc/usingthymeleaf.html#unescaped-text" target="_blank" rel="external">showing unescaped text</a></p>
<p>#data-th-text –取代–&gt; th:text</p>
<p><a href="https://github.com/thymeleaf/thymeleaf/issues/93" target="_blank" rel="external">因為要符和HTML5 validation</a></p>
<p>#Thymeleaf local variable</p>
<p><a href="http://stackoverflow.com/questions/20728660/setting-up-a-value-for-a-variable-name-in-thymeleaf" target="_blank" rel="external">link</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/11.png" alt="image"></p>
<p>#一堆Attribue th:atti , th:text…</p>
<p><a href="http://www.thymeleaf.org/doc/usingthymeleaf.html#setting-attribute-values" target="_blank" rel="external">link</a></p>
<p>#這篇值得看一下 springmvc + mongo + thymeleaf + ajax</p>
<p><a href="http://xpadro.blogspot.tw/2014/02/thymeleaf-integration-with-spring-part-1.html" target="_blank" rel="external">link</a></p>
<p>#現在的問題是 要怎麼最簡單的設定 Thymeleaf ？</p>
<p>其實之前template找不到的問題是可以由<a href="http://docs.spring.io/spring-boot/docs/1.1.4.RELEASE/reference/htmlsingle/#common-application-properties" target="_blank" rel="external">application.properties</a>設定 </p>
<p>##THYMELEAF (ThymeleafAutoConfiguration)<br>spring.thymeleaf.prefix=classpath:/templates/</p>
<p>spring.thymeleaf.suffix=.html</p>
<p>spring.thymeleaf.mode=HTML5</p>
<p>spring.thymeleaf.encoding=UTF-8</p>
<p>spring.thymeleaf.content-type=text/html # ;charset=<encoding> is added</encoding></p>
<p>spring.thymeleaf.cache=true # set to false for hot refresh</p>
<p>這邊的classpath: 會是src/main/resource</p>
<p>可以直接改成<code>spring.thymeleaf.prefix=WEB-INF/templates/</code> 就可以改變你template放置的目錄(預設是放在src/main/resources/templates)</p>
<p>但是在使用#{…} 去抓external message 時 一直抓不到, 我一直以為Thymeleaf的設定哪裡有錯 ,<br>所以就從剛好有找到的資料下手</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/12.png" alt="image"></p>
<p>但還是一直出現找不到template的錯誤訊息,一定要設定application.properties的參數才行</p>
<p>直到我找到<a href="http://stackoverflow.com/questions/22899132/thymeleaf-fails-on-gradle-build" target="_blank" rel="external">link</a> , 根據<a href="https://github.com/spring-projects/spring-boot/blob/master/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/thymeleaf/ThymeleafAutoConfiguration.java" target="_blank" rel="external">ThymeleafAutoConfiguration</a>的內容 此回應者的內容 you need to use the conventional bean name for the template resolver (“defaultTemplateResolver”), so that Boot knows what you are doing. </p>
<p>而從<a href="http://docs.spring.io/spring-javaconfig/docs/1.0.0.M4/reference/html/ch02s02.html" target="_blank" rel="external">java bean</a> 知道 By default, the bean name will be the same as the method name .</p>
<p>所以我嘗試將ThymeleafViewResolver 的function name:thymeleafTemplateResolver 改為 defaultTemplateResolver</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/13.png" alt="image"></p>
<p>結果就可以了!</p>
<p>研究發現同樣的bean name 才能去override原本的bean</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/14.png" alt="image"></p>
<h1 id="完整的Structure">完整的Structure</h1><p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/15.png" alt="image"></p>
<p>我希望主要進入程式點(entry point) 程式越少越好 , 各個不同部分的configuration 由不同的class去負責</p>
<p>由此圖可以看到 我將Configuration分為三個部分</p>
<p>1.DatabaseConfig</p>
<p>2.SpringContext</p>
<p>3.Thymeleaf</p>
<p>###App</p>
<p>然而App 自己本身extends WebMvcConfigurerAdapter , 其實SpringContext的部分就是在做WebMvcConfigurerAdatper本身要做的事情,用來override某些設定, 但是就之前所說的 , 我希望儘量將Configuration分散 , 所以另外分成SpringContext</p>
<p>###SpringContext</p>
<ol>
<li><p>控管哪些resources可以被使用,並決定哪個可以被設定成external message(message.properties)</p>
</li>
<li><p>設定Locale , 決定defaultLocale ,或根據server決定locale</p>
</li>
</ol>
<p>###Thymeleaf</p>
<ol>
<li><p>決定Spring的template engine</p>
</li>
<li><p>設定template放置的位置prefix:WEB-INF/template , postfix:.html , cacheable : false(讓Thymeleaf可以直接refresh)</p>
</li>
</ol>
<p>###DatabaseConfig</p>
<ol>
<li>設定database 連線</li>
<li>將連線資料包成dataSource</li>
<li>設定transaction</li>
</ol>
<p>其他部分跟以往的設計一樣</p>
<p>###Model , Dao , Service ,Controller</p>
<p>有需要稍微了解請看<a href="http://jackmew.github.io/2014/07/29/20140729/" target="_blank" rel="external">link</a></p>
<p>###專案結構</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/16.png" alt="image"></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/17.png" alt="image"></p>
<p>之後還會加入SecurityConfig</p>
<p>還會再做一個完全用application.properties定義的project</p>
<p>因為找到<a href="http://docs.spring.io/spring-boot/docs/1.1.4.RELEASE/reference/htmlsingle/#common-application-properties" target="_blank" rel="external">International</a></p>
<p>INTERNATIONALIZATION (MessageSourceAutoConfiguration)</p>
<p>spring.messages.basename=messages</p>
<p>spring.messages.cacheSeconds=-1</p>
<p>spring.messages.encoding=UTF-8</p>
<p>可能可以直接取代SpringContext 內 ResourceBundleMessageSource的部分 .</p>
<p>#Message Queue</p>
<p><a href="http://lab.howie.tw/2012/07/whats-different-between-amqp-and-jms.html" target="_blank" rel="external">AMQP , JMS</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.zestlifia.tw/blog-old/2014/07/30/20140730/" data-id="cih51d85v0000psrg2cpcak3y" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-old/tags/spring-boot/">spring boot</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20140729" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog-old/2014/07/29/20140729/" class="article-date">
  <time datetime="2014-07-29T01:31:47.000Z" itemprop="datePublished">2014-07-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog-old/categories/blog/">blog</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog-old/2014/07/29/20140729/">2014/07/29</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#bean scope</p>
<p><a href="http://docs.spring.io/spring/docs/4.0.1.RELEASE/spring-framework-reference/htmlsingle/#beans-java-specifying-bean-scope" target="_blank" rel="external">link</a></p>
<p>#especially around the use of DTOs for the view layer, that exacly duplicate the fields and methods of an entity/model object</p>
<p><a href="http://forum.spring.io/forum/other-spring-related/architecture/56753-controller-vs-service-vs-private-method-on-command-object" target="_blank" rel="external">link</a></p>
<p>#DTR Trading</p>
<p><a href="http://dtr-trading.blogspot.tw/" target="_blank" rel="external">link</a></p>
<p>這個網站中 有一系列教學 全部都是2014年的記錄 </p>
<p>而且測試是可以run起來的 </p>
<p>我要把它全部看懂</p>
<p>#spring-ex01</p>
<p><a href="http://dtr-trading.blogspot.tw/2014/02/spring-mvc-4-java-config.html" target="_blank" rel="external">java-config</a></p>
<p>將原本的xml檔案全部刪除 改成java config , 使用jsp(後面會改用Thymeleaf)</p>
<p>建構的方式跟之前的springmvc / springboot 很像</p>
<p>WebAppConfig extends WebMvcConfigurerAdapter</p>
<p>就等於 springmvc 中的 <strong>WebAppInitilizer</strong></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/12.png" alt="image"></p>
<p>也等於 springboot 中的 <strong>App</strong></p>
<p>但奇特的是多了Initializer.java</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/1.png" alt="image"></p>
<p>似乎是在做集合所有configuration的動作</p>
<p>將Initializer刪除後 無法run</p>
<p>#spring-ex02</p>
<p><a href="http://dtr-trading.blogspot.tw/2014/02/spring-mvc-4-and-hibernate-4.html" target="_blank" rel="external">spring-mvc-4-and-hibernate-4</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/2.png" alt="image"></p>
<p>用@PropertySource去抓src/main/resources/databases.properties裡面的參數 設定database參數 和 hibernate參數</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/3.png" alt="image"></p>
<p>##DataSource </p>
<p>設定database connection:</p>
<ol>
<li>db.driver</li>
<li>db.url</li>
<li>db.username</li>
<li>db.password</li>
</ol>
<p>加上@Bean 之後 就可以@Autowired</p>
<p>##LocalSessionFactoryBean</p>
<p>session我之前的用法是 會將某些data 存在一個很大的scope中 所以程式中大部份地方都可以存取到session中的data , 然後session有個自己的生命週期 , 有timeout.</p>
<p>所以我猜測LocalSessionFactoryBean 會將database/hibernate的相關資訊 存在某session中 便於快速存取 快速mapping</p>
<p><a href="http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/orm/hibernate4/LocalSessionFactoryBean.html" target="_blank" rel="external">LocalSessionFactoryBean</a>:FactoryBean that creates a Hibernate SessionFactory. This is the usual way to set up a shared Hibernate SessionFactory in a Spring application context; the SessionFactory can then be passed to<strong> Hibernate-based data access objects via dependency injection.</strong></p>
<p>也就是是指sessionFactoryBean.setPackagesToScan(env.getRequiredProperty(PROPERTY_NAME_ENTITYMANAGER_PACKAGES_TO_SCAN));</p>
<p>它會先去scan com.dtr.oas.model 這個資料夾中的domain object</p>
<p>最後由HibernateTransactionManager 整合以上設定 , 也就是說 藉由以上 才可以使用sql 中的 Transaction .</p>
<p>##DAO (Data Access Object)</p>
<p><a href="http://en.wikipedia.org/wiki/Data_access_object" target="_blank" rel="external">DAO</a>是指domain object 跟 database 的 mapping 如何實作 並將細節隱藏起來的這個Layer</p>
<p>所以如何mapping的這個過程 我們不需要去理會 但我們制定對database操作的動作 CRUD</p>
<p>###interface StrategyDAO</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/4.png" alt="image"></p>
<p>這邊只訂定要對database做什麼操作</p>
<p>###StragegyDAOImple </p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/5.png" alt="image"></p>
<p>實作這些操作</p>
<p>要注意的是: @Autowired SessionFactory </p>
<p>=&gt; 也就是我們在DatabaseConfig時的@Bean</p>
<p>為什麼Hibernate知道要去 1.操作哪個database? 2.操作哪個table?</p>
<ol>
<li>建立DataSource時 就已經建立database連線 並選擇連線到哪個database</li>
<li>LocalSessionFactoryBean setPackagesToScan 時 去scan了Strategy.java</li>
</ol>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/6.png" alt="image"></p>
<p>可以看到@Entity @Table(name=”strategy”)<br>這告訴Spring 這個object mapping到database裡的名字叫做strategy的table:</p>
<p>然後在DatabaseConfig時 我們設定了很多細節 所以才可以使用到sql裡面的transaction,在此同時也設定了DAO部分的object mapping</p>
<p>也就是說當使用到Strategy這個 , 就會自動mapping到database table:strategy</p>
<p>所以@Autowired SessionFactory 讓我們可以順利的實作DAO CRUD 對database操作 </p>
<p>##Service</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/7.png" alt="image"></p>
<p>這邊的servcice 沒什麼特別的 就只是去使用DAO 也就是所謂的repository(通常制定如何操作資料庫)</p>
<p>唯一要注意的就是Annotation : @Service @Transational =&gt; 這個Transatonal表示 當執行Service的某個function<br>進而使用repository去操作資料庫時,若function沒有執行完,就會rollback .</p>
<p>####那為何Transaction是設在Service?</p>
<p>因為Service不一定只call一次repository , 這個service的某function可能叫做updateUsername() </p>
<p>內容是去抓某些叫XXX,YYY的user 將他們的名字都update成ZZZ , 所以要使用repository的不止一次query,多次update或save</p>
<p>ex:</p>
<ol>
<li>query XXX</li>
<li>update XXX to ZZZ</li>
<li>query YYY</li>
<li>update YYY to ZZZ</li>
</ol>
<p>這幾個動作要一次全部完成 若是執行到中間的某個程式 就突然被中斷 那就要所有程式都被rollback</p>
<p>這樣database才不會出現 不完整的資料</p>
<p>#Controller</p>
<p>由於@Controller 所以在WebAppConfig時 的@ComponentScan 就會將Controller scan到memory中 ,</p>
<p>所以Controller 在啟動server時 就有在執行了 , 並等待RequestMapping , 在這個例子中沒有做Security , 所以只要有RequestMapping的url 我們都可以直接去看.</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/8.png" alt="image"></p>
<p>當啟動server時 localhost:8080/spring-ex02/ </p>
<p>就會被</p>
<pre><code><span class="annotation">@RequestMapping</span>(value=<span class="string">"/"</span>)
<span class="keyword">public</span> <span class="function">ModelAndView <span class="title">mainPage</span><span class="params">()</span> </span>{
    <span class="keyword">return</span> <span class="keyword">new</span> ModelAndView(<span class="string">"home"</span>);
}
</code></pre><p>攔截到 並導向home.html</p>
<p>StrategyController 在宣告class時 上面就有@RequestMapping(value=”/strategy”)</p>
<p>這表示它的function 再加一層@RequestMapping(value=”/add”)</p>
<p>url mapping會變成 : localhost:8080/spring-ex02/strategy/add</p>
<p>@RequestMapping(value=”/edit/{id}”, method=RequestMethod.GET)</p>
<p>這個id 表示可以是任一值 並且都會對應到這個function , 並且controller這function可以抓到id這個值</p>
<p>springmvc + hibernate + mysql + jsp 完成基本的CRUD</p>
<p>#spring-ex03</p>
<p><a href="http://dtr-trading.blogspot.tw/2014/02/spring-mvc-4-thymeleaf-prep-and-mockup.html" target="_blank" rel="external">link</a></p>
<p>這章在講準備好Thymeleaf的環境:ThymeleafConfig</p>
<p>另外Thymeleaf的檔案(suffix)是.html</p>
<p>在Initializer加入ThymeleafConfig</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/9.png" alt="image"></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/10.png" alt="image"></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/11.png" alt="image"></p>
<p>TemplateResolver 似乎會蓋過 UrlBasedViewResolver 的設定</p>
<p>因為controller導向的是/WEB-INF/views/home.html</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/12.png" alt="image"></p>
<p>此時的html是static 沒有加上thymeleaf</p>
<p>#spring-ex04</p>
<p><a href="http://dtr-trading.blogspot.tw/2014/02/spring-mvc-4-thymeleaf-crud-part-1.html" target="_blank" rel="external">Thymeleaf CRUD - Part 1</a></p>
<p>加上hibernate-validator</p>
<p>然後<br>StragtegyDTO(Data Transfer Object)</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/13.png" alt="image"></p>
<p>就可以加上@NotNull , @NotEmpty 等validator</p>
<p>StrategyMapper 做Strategy 和 StrategyDTO 之間轉換</p>
<p>Strategy &lt;— StrategyMapper —&gt; StrategyDTO</p>
<p>StrategyDTO還定義了<a href="http://docs.spring.io/spring/docs/4.0.1.RELEASE/spring-framework-reference/htmlsingle/#beans-java-specifying-bean-scope" target="_blank" rel="external">scope</a></p>
<p>controller — strategys &amp; strategyDTO —&gt; HTML(Thymeleaf)</p>
<p>controller &lt;– strategyDTO — HTML(Thymeleaf)</p>
<p>其實我覺得根本不需要strategyDTO也可以</p>
<p>我覺得概念上可能是strategy 是對應 table 的物件 不應該是拿來傳來傳去的</p>
<p>DTO(Data Transfer Object) 才是拿來傳送的</p>
<p>###delete phase</p>
<p>用phase定義delete三個階段</p>
<p>1.stage</p>
<p>2.confirm</p>
<p>3.cancel</p>
<p>#spring-ex05</p>
<p><a href="http://dtr-trading.blogspot.tw/2014/02/spring-mvc-4-thymeleaf-and-bootstrap.html" target="_blank" rel="external">Thymeleaf and Bootstrap</a></p>
<p>加上jquery &amp; bootstrap</p>
<p>之後改用webjar來加入</p>
<p>#spring-ex06</p>
<p><a href="http://dtr-trading.blogspot.tw/2014/02/spring-mvc-4-bootstrap-and-validation.html" target="_blank" rel="external">Bootstrap and Validation</a></p>
<p>DTR決定remove DTO了 …我就覺得看不懂DTO和domain object有啥差別…</p>
<p>BaseEntity =&gt; 加強版的Id設定</p>
<p>Strategy =&gt; 繼承 BaseEntity =&gt; 就有了Id</p>
<p><a href="http://www.silverbaytech.com/2013/04/16/custom-messages-in-spring-validation/" target="_blank" rel="external">Spring Validation</a> in using <a href="http://hibernate.org/validator/" target="_blank" rel="external">Hibernate Validator</a></p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/15.png" alt="image"></p>
<p>@NotNull , @Size =&gt; javax.validation</p>
<p>@NotEmpty =&gt; hibernate.validation</p>
<p>有以上設定後 在controller就可以用 =&gt; @Valid</p>
<p>controller =&gt;</p>
<ol>
<li>perform validation and pass error message back to the Thymeleaf pages</li>
<li>logging the controller</li>
<li>update the controller method to return Strings rather than ModelAndView objects</li>
</ol>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/14.png" alt="image"></p>
<p>當按下新增後 對應到addStrategy</p>
<p>會將Stategy object傳到這個function 由Strategy strategy接收</p>
<p>前面又定義了他是@ModelAttribute 表示是hibernate mapping 到的object</p>
<p>再加上@Valid 就會去判斷在這個object 有加上哪些validator(@NotNull,NotEmpty…..) , 若是有無法過的validator就會發出訊息給 BindingResult 接收 .</p>
<ol>
<li>出現錯誤 : BindingResult + RedirectAttributes</li>
</ol>
<p>BindingResult 存有訊息 由RedirectAttributes轉頁面</p>
<ol>
<li>正常 : Model =&gt; </li>
</ol>
<p>model.addAttribute(“message”, message); =&gt; 存訊息</p>
<p>return “redirect:/strategy/list”; =&gt; return String 轉頁面</p>
<p>的確是正常出現錯誤訊息了 </p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/16.png" alt="image"></p>
<p>但是看不懂Thymeleaf data-th-if=#fields.hasErrors</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/dtr/17.png" alt="image"></p>
<p>不知道是怎麼接收錯誤訊息 或是怎麼知道錯誤訊息？</p>
<p>#Field errors</p>
<p><a href="http://www.thymeleaf.org/doc/thymeleafspring.html#field-errors" target="_blank" rel="external">link</a></p>
<p>有了基本概念後 再去看上一張圖片</p>
<p>Thymelea的form和field一直有和domain object bind在一起</p>
<p><code>data-th-field=&quot;*{type}&quot;</code></p>
<p><code>data-th-field=&quot;*{name}&quot;</code></p>
<p>確定domain objct: strategy的<strong>type </strong>Column bind在此格td</p>
<p><strong>name</strong>也是做一樣的事情</p>
<p>當 BindingResult result 存有錯誤訊息 </p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/24.png" alt="image"></p>
<p>看到錯誤訊息：</p>
<p>Field error in object ‘strategy’ on field ‘name’: </p>
<p>Field error in object ‘strategy’ on field ‘type’:</p>
<p>所以<br>type error<br>name error</p>
<p>就可以抓到有錯誤</p>
<p><img src="https://dl.dropboxusercontent.com/u/47510080/markdown/spring/thymeleaf/25.png" alt="image"></p>
<p><code>data-th-errors</code> 顯示出所有錯誤訊息</p>
<p>在夾帶button type=submit 的action 參數value時 </p>
<p>原本<code>if (action.equals(&quot;save&quot;))</code></p>
<p>改成<code>if (phase.equals( messageSource.getMessage(&quot;button.action.stage&quot;, null, Locale.US) ))</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.zestlifia.tw/blog-old/2014/07/29/20140729/" data-id="cih50xtqd0000o9rgimga2nqi" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-old/tags/hibernate/">hibernate</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog-old/tags/springmvc/">springmvc</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/blog-old/page/9/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/blog-old/page/8/">8</a><a class="page-number" href="/blog-old/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/blog-old/page/11/">11</a><a class="page-number" href="/blog-old/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/blog-old/page/22/">22</a><a class="extend next" rel="next" href="/blog-old/page/11/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog-old/categories/blog/">blog</a><span class="category-list-count">176</span></li><li class="category-list-item"><a class="category-list-link" href="/blog-old/categories/developent/">developent</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/blog-old/categories/leandev/">leandev</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/C/">C</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/CSS/">CSS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/HTML/">HTML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/JQuery/">JQuery</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/JQuery-Validate/">JQuery Validate</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/Java/">Java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/Jquery-mobile/">Jquery mobile</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/MVC/">MVC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/Mac/">Mac</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/REST/">REST</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/ajax/">ajax</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/android/">android</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/apache/">apache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/blog/">blog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/bower/">bower</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/callback/">callback</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/canvas/">canvas</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/command/">command</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/compass/">compass</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/cordova/">cordova</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/css/">css</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/development/">development</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/dropbox/">dropbox</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/eclipse/">eclipse</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/exception-handle/">exception handle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/express/">express</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/git/">git</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/gradle/">gradle</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/groovy/">groovy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/gwt/">gwt</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/heroku/">heroku</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/hibernate/">hibernate</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/host/">host</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/hosting/">hosting</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/java/">java</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/javasciprt/">javasciprt</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/javascript/">javascript</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/jquery/">jquery</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/jquery-mobile/">jquery mobile</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/jquery-plugin/">jquery plugin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/json/">json</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/jsonp/">jsonp</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/kinecticjs/">kinecticjs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/kineticjs/">kineticjs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/log4j/">log4j</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/mac/">mac</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/maven/">maven</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/mobile/">mobile</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/mongo/">mongo</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/mou/">mou</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/mysql/">mysql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/node/">node</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/nodejs/">nodejs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/phoneGap/">phoneGap</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/phonegap/">phonegap</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/php/">php</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/plugin/">plugin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/remote-debug/">remote debug</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/ripple/">ripple</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/safari/">safari</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/sass/">sass</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/sencha/">sencha</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/shell/">shell</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/spring/">spring</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/spring-boot/">spring boot</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/spring-data-jpa/">spring data jpa</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/spring-data-rest/">spring data rest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/spring-securitry/">spring securitry</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/springboot/">springboot</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/springmvc/">springmvc</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/springsecurity/">springsecurity</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/sublime/">sublime</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/tbs/">tbs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/terminal/">terminal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/thymeleaf/">thymeleaf</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/unit-test/">unit test</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/vaadin/">vaadin</a><span class="tag-list-count">36</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/vaddin/">vaddin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/validate/">validate</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/validation/">validation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/vim/">vim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/wbase/">wbase</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/weinre/">weinre</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/yahoo-finance-api/">yahoo finance api</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog-old/tags/yeoman/">yeoman</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/blog-old/tags/C/" style="font-size: 10px;">C</a> <a href="/blog-old/tags/CSS/" style="font-size: 11px;">CSS</a> <a href="/blog-old/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/blog-old/tags/JQuery/" style="font-size: 11px;">JQuery</a> <a href="/blog-old/tags/JQuery-Validate/" style="font-size: 10px;">JQuery Validate</a> <a href="/blog-old/tags/Java/" style="font-size: 10px;">Java</a> <a href="/blog-old/tags/Jquery-mobile/" style="font-size: 10px;">Jquery mobile</a> <a href="/blog-old/tags/MVC/" style="font-size: 10px;">MVC</a> <a href="/blog-old/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/blog-old/tags/REST/" style="font-size: 10px;">REST</a> <a href="/blog-old/tags/ajax/" style="font-size: 10px;">ajax</a> <a href="/blog-old/tags/android/" style="font-size: 10px;">android</a> <a href="/blog-old/tags/apache/" style="font-size: 10px;">apache</a> <a href="/blog-old/tags/blog/" style="font-size: 10px;">blog</a> <a href="/blog-old/tags/bower/" style="font-size: 10px;">bower</a> <a href="/blog-old/tags/callback/" style="font-size: 11px;">callback</a> <a href="/blog-old/tags/canvas/" style="font-size: 11px;">canvas</a> <a href="/blog-old/tags/command/" style="font-size: 10px;">command</a> <a href="/blog-old/tags/compass/" style="font-size: 10px;">compass</a> <a href="/blog-old/tags/cordova/" style="font-size: 12px;">cordova</a> <a href="/blog-old/tags/css/" style="font-size: 16px;">css</a> <a href="/blog-old/tags/development/" style="font-size: 13px;">development</a> <a href="/blog-old/tags/dropbox/" style="font-size: 11px;">dropbox</a> <a href="/blog-old/tags/eclipse/" style="font-size: 10px;">eclipse</a> <a href="/blog-old/tags/exception-handle/" style="font-size: 10px;">exception handle</a> <a href="/blog-old/tags/express/" style="font-size: 17px;">express</a> <a href="/blog-old/tags/git/" style="font-size: 12px;">git</a> <a href="/blog-old/tags/gradle/" style="font-size: 11px;">gradle</a> <a href="/blog-old/tags/groovy/" style="font-size: 10px;">groovy</a> <a href="/blog-old/tags/gwt/" style="font-size: 14px;">gwt</a> <a href="/blog-old/tags/heroku/" style="font-size: 13px;">heroku</a> <a href="/blog-old/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/blog-old/tags/hibernate/" style="font-size: 10px;">hibernate</a> <a href="/blog-old/tags/host/" style="font-size: 10px;">host</a> <a href="/blog-old/tags/hosting/" style="font-size: 10px;">hosting</a> <a href="/blog-old/tags/java/" style="font-size: 13px;">java</a> <a href="/blog-old/tags/javasciprt/" style="font-size: 11px;">javasciprt</a> <a href="/blog-old/tags/javascript/" style="font-size: 16px;">javascript</a> <a href="/blog-old/tags/jquery/" style="font-size: 10px;">jquery</a> <a href="/blog-old/tags/jquery-mobile/" style="font-size: 13px;">jquery mobile</a> <a href="/blog-old/tags/jquery-plugin/" style="font-size: 10px;">jquery plugin</a> <a href="/blog-old/tags/json/" style="font-size: 10px;">json</a> <a href="/blog-old/tags/jsonp/" style="font-size: 11px;">jsonp</a> <a href="/blog-old/tags/kinecticjs/" style="font-size: 10px;">kinecticjs</a> <a href="/blog-old/tags/kineticjs/" style="font-size: 10px;">kineticjs</a> <a href="/blog-old/tags/log4j/" style="font-size: 10px;">log4j</a> <a href="/blog-old/tags/mac/" style="font-size: 15px;">mac</a> <a href="/blog-old/tags/maven/" style="font-size: 14px;">maven</a> <a href="/blog-old/tags/mobile/" style="font-size: 10px;">mobile</a> <a href="/blog-old/tags/mongo/" style="font-size: 13px;">mongo</a> <a href="/blog-old/tags/mou/" style="font-size: 10px;">mou</a> <a href="/blog-old/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/blog-old/tags/node/" style="font-size: 18px;">node</a> <a href="/blog-old/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/blog-old/tags/phoneGap/" style="font-size: 10px;">phoneGap</a> <a href="/blog-old/tags/phonegap/" style="font-size: 18px;">phonegap</a> <a href="/blog-old/tags/php/" style="font-size: 10px;">php</a> <a href="/blog-old/tags/plugin/" style="font-size: 10px;">plugin</a> <a href="/blog-old/tags/remote-debug/" style="font-size: 10px;">remote debug</a> <a href="/blog-old/tags/ripple/" style="font-size: 10px;">ripple</a> <a href="/blog-old/tags/safari/" style="font-size: 10px;">safari</a> <a href="/blog-old/tags/sass/" style="font-size: 14px;">sass</a> <a href="/blog-old/tags/sencha/" style="font-size: 19px;">sencha</a> <a href="/blog-old/tags/shell/" style="font-size: 10px;">shell</a> <a href="/blog-old/tags/spring/" style="font-size: 11px;">spring</a> <a href="/blog-old/tags/spring-boot/" style="font-size: 14px;">spring boot</a> <a href="/blog-old/tags/spring-data-jpa/" style="font-size: 14px;">spring data jpa</a> <a href="/blog-old/tags/spring-data-rest/" style="font-size: 10px;">spring data rest</a> <a href="/blog-old/tags/spring-securitry/" style="font-size: 10px;">spring securitry</a> <a href="/blog-old/tags/springboot/" style="font-size: 12px;">springboot</a> <a href="/blog-old/tags/springmvc/" style="font-size: 14px;">springmvc</a> <a href="/blog-old/tags/springsecurity/" style="font-size: 10px;">springsecurity</a> <a href="/blog-old/tags/sublime/" style="font-size: 10px;">sublime</a> <a href="/blog-old/tags/tbs/" style="font-size: 11px;">tbs</a> <a href="/blog-old/tags/terminal/" style="font-size: 10px;">terminal</a> <a href="/blog-old/tags/thymeleaf/" style="font-size: 10px;">thymeleaf</a> <a href="/blog-old/tags/unit-test/" style="font-size: 10px;">unit test</a> <a href="/blog-old/tags/vaadin/" style="font-size: 20px;">vaadin</a> <a href="/blog-old/tags/vaddin/" style="font-size: 10px;">vaddin</a> <a href="/blog-old/tags/validate/" style="font-size: 10px;">validate</a> <a href="/blog-old/tags/validation/" style="font-size: 10px;">validation</a> <a href="/blog-old/tags/vim/" style="font-size: 10px;">vim</a> <a href="/blog-old/tags/wbase/" style="font-size: 13px;">wbase</a> <a href="/blog-old/tags/weinre/" style="font-size: 10px;">weinre</a> <a href="/blog-old/tags/yahoo-finance-api/" style="font-size: 10px;">yahoo finance api</a> <a href="/blog-old/tags/yeoman/" style="font-size: 10px;">yeoman</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog-old/archives/2015/11/">November 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-old/archives/2015/03/">March 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-old/archives/2015/02/">February 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-old/archives/2015/01/">January 2015</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-old/archives/2014/12/">December 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-old/archives/2014/11/">November 2014</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-old/archives/2014/10/">October 2014</a><span class="archive-list-count">18</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-old/archives/2014/09/">September 2014</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-old/archives/2014/08/">August 2014</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-old/archives/2014/07/">July 2014</a><span class="archive-list-count">22</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-old/archives/2014/06/">June 2014</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-old/archives/2014/05/">May 2014</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-old/archives/2014/04/">April 2014</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog-old/archives/2014/03/">March 2014</a><span class="archive-list-count">33</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog-old/2015/11/19/sublime/">(no title)</a>
          </li>
        
          <li>
            <a href="/blog-old/2015/11/19/Working-Record/">(no title)</a>
          </li>
        
          <li>
            <a href="/blog-old/2015/11/19/20141120/">2014/11/20</a>
          </li>
        
          <li>
            <a href="/blog-old/2015/03/27/20150325/">2015/03/25</a>
          </li>
        
          <li>
            <a href="/blog-old/2015/02/12/20150212/">2015/02/12</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 John Ho<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/blog-old/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/blog-old/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/blog-old/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>